---
tags:
  - APIæ–‡æ¡£
  - è®¤è¯
  - ç”¨æˆ·ä¿¡æ¯
created: 2025-11-21
modified: 2025-11-21
category: è®¤è¯API
difficulty: beginner
---

# ğŸ‘¤ ç”¨æˆ·ä¿¡æ¯æ¥å£

## ğŸ“‹ æ¥å£æ¦‚è¿°

è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ“ è¯·æ±‚ä¿¡æ¯

- **HTTPæ–¹æ³•**: `GET`
- **URLè·¯å¾„**: `/auth/userinfo`
- **æƒé™è¦æ±‚**: å·²è®¤è¯ç”¨æˆ·

## ğŸ“¥ è¯·æ±‚å‚æ•°

æ— è¯·æ±‚å‚æ•°ã€‚

## âœ… æˆåŠŸå“åº”

### å“åº”ç»“æ„

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| code | number | çŠ¶æ€ç  |
| message | string | å“åº”æ¶ˆæ¯ |
| data | object | ç”¨æˆ·ä¿¡æ¯ |
| data.id | number | ç”¨æˆ·ID |
| data.username | string | ç”¨æˆ·å |
| data.email | string | é‚®ç®± |
| data.role | string | ç”¨æˆ·è§’è‰²(USER/SHOPER/ADMIN) |
| data.createdAt | string | è´¦æˆ·åˆ›å»ºæ—¶é—´ |
| data.updatedAt | string | è´¦æˆ·æ›´æ–°æ—¶é—´ |

### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 200,
  "message": "è·å–ç”¨æˆ·ä¿¡æ¯æˆåŠŸ",
  "data": {
    "id": 1,
    "username": "testuser",
    "email": "test@example.com",
    "role": "USER",
    "createdAt": "2025-11-20T09:02:15.123",
    "updatedAt": "2025-11-21T10:30:45.123"
  }
}
```

## âŒ é”™è¯¯å“åº”

### é”™è¯¯å“åº”ç¤ºä¾‹ï¼ˆæœªè®¤è¯ï¼‰

```json
{
  "success": false,
  "code": 401,
  "message": "è®¤è¯å¤±è´¥ï¼Œè¯·å…ˆç™»å½•",
  "data": null
}
```

## ğŸ§ª å‰ç«¯è°ƒç”¨ç¤ºä¾‹

```javascript
import { api } from '@/api/request'
import type { User } from '@/types'

// è·å–ç”¨æˆ·ä¿¡æ¯å‡½æ•°
async function getUserInfo(): Promise<User> {
  try {
    const response = await api.get<User>('/auth/userinfo')
    return response
  } catch (error) {
    console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error)
    throw error
  }
}

// ä½¿ç”¨ç¤ºä¾‹
getUserInfo()
  .then(user => {
    console.log('ç”¨æˆ·ä¿¡æ¯:', user)
    // æ›´æ–°ç”¨æˆ·çŠ¶æ€å­˜å‚¨
    userStore.setUser(user)
  })
  .catch(error => {
    console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error)
    // å¦‚æœæ˜¯è®¤è¯é”™è¯¯ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢
    if (error.response?.status === 401) {
      router.push('/login')
    }
  })
```