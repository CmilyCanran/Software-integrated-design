---
tags:
  - APIæ–‡æ¡£
  - å•†å“
  - æ›´æ–°
created: 2025-11-21
modified: 2025-11-21
category: å•†å“API
difficulty: intermediate
---

# âœï¸ æ›´æ–°å•†å“æ¥å£

## ğŸ“‹ æ¥å£æ¦‚è¿°

å•†å®¶æ›´æ–°è‡ªå·±åˆ›å»ºçš„å•†å“ä¿¡æ¯ã€‚

## ğŸ“ è¯·æ±‚ä¿¡æ¯

- **HTTPæ–¹æ³•**: `PUT`
- **URLè·¯å¾„**: `/products/{id}`
- **æƒé™è¦æ±‚**: SHOPERè§’è‰²ï¼ˆå•†å“åˆ›å»ºè€…ï¼‰

## ğŸ“¥ è¯·æ±‚å‚æ•°

### è·¯å¾„å‚æ•° (Path Parameters)

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| id | number | æ˜¯ | å•†å“ID |

### è¯·æ±‚ä½“ (Request Body)

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| productName | string | å¦ | å•†å“åç§° |
| description | string | å¦ | å•†å“æè¿° |
| price | number | å¦ | å•†å“ä»·æ ¼ |
| discount | number | å¦ | æŠ˜æ‰£ç‡ |
| stockQuantity | number | å¦ | åº“å­˜æ•°é‡ |
| isAvailable | boolean | å¦ | æ˜¯å¦ä¸Šæ¶ |
| category | string | å¦ | å•†å“åˆ†ç±» |
| brand | string | å¦ | å•†å“å“ç‰Œ |
| color | string | å¦ | å•†å“é¢œè‰² |
| size | string | å¦ | å•†å“å°ºå¯¸ |
| tags | array | å¦ | å•†å“æ ‡ç­¾æ•°ç»„ |

## ğŸ“¤ è¯·æ±‚ç¤ºä¾‹

```
PUT /products/2
```

```json
{
  "productName": "æ–°æ¬¾Tæ¤-å‡çº§ç‰ˆ",
  "description": "çº¯æ£‰èˆ’é€‚Tæ¤ï¼Œå‡çº§ç‰ˆ",
  "price": 99.99,
  "discount": 5.00,
  "stockQuantity": 150,
  "isAvailable": true,
  "category": "ç”·è£…",
  "brand": "èˆ’é€‚å“ç‰Œ",
  "color": "ç™½è‰²",
  "size": "L",
  "tags": ["æ–°å“", "çº¯æ£‰", "å‡çº§ç‰ˆ"]
}
```

## âœ… æˆåŠŸå“åº”

### å“åº”ç»“æ„

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| code | number | çŠ¶æ€ç  |
| message | string | å“åº”æ¶ˆæ¯ |
| data | object | æ›´æ–°åçš„å•†å“ä¿¡æ¯ |
| data.id | number | å•†å“ID |
| data.productName | string | å•†å“åç§° |
| data.description | string | å•†å“æè¿° |
| data.price | number | å•†å“ä»·æ ¼ |
| data.salesCount | number | é”€å”®æ•°é‡ |
| data.discount | number | æŠ˜æ‰£ç‡ |
| data.stockQuantity | number | åº“å­˜æ•°é‡ |
| data.isAvailable | boolean | æ˜¯å¦ä¸Šæ¶ |
| data.creatorId | number | åˆ›å»ºè€…ID |
| data.productData | object | å•†å“æ‰©å±•æ•°æ® |
| data.createdAt | string | åˆ›å»ºæ—¶é—´ |
| data.updatedAt | string | æ›´æ–°æ—¶é—´ |

### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 200,
  "message": "å•†å“æ›´æ–°æˆåŠŸ",
  "data": {
    "id": 2,
    "productName": "æ–°æ¬¾Tæ¤-å‡çº§ç‰ˆ",
    "description": "çº¯æ£‰èˆ’é€‚Tæ¤ï¼Œå‡çº§ç‰ˆ",
    "price": 99.99,
    "salesCount": 0,
    "discount": 5.00,
    "stockQuantity": 150,
    "isAvailable": true,
    "creatorId": 1,
    "productData": {
      "image_data": {
        "main_image": null,
        "gallery": [],
        "thumbnails": null,
        "total_images": 0
      },
      "specifications": {
        "category": "ç”·è£…",
        "brand": "èˆ’é€‚å“ç‰Œ",
        "color": "ç™½è‰²",
        "size": "L"
      },
      "tags": ["æ–°å“", "çº¯æ£‰", "å‡çº§ç‰ˆ"],
      "extended_attributes": {}
    },
    "createdAt": "2025-11-21T10:30:45.123",
    "updatedAt": "2025-11-21T11:30:45.123"
  }
}
```

## âŒ é”™è¯¯å“åº”

### é”™è¯¯å“åº”ç¤ºä¾‹ï¼ˆå•†å“ä¸å­˜åœ¨ï¼‰

```json
{
  "success": false,
  "code": 404,
  "message": "è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨",
  "data": null
}
```

### é”™è¯¯å“åº”ç¤ºä¾‹ï¼ˆæƒé™ä¸è¶³ï¼‰

```json
{
  "success": false,
  "code": 403,
  "message": "æƒé™ä¸è¶³ï¼Œæ— æ³•è®¿é—®æ­¤èµ„æº",
  "data": null
}
```

### é”™è¯¯å“åº”ç¤ºä¾‹ï¼ˆå•†å“åå·²å­˜åœ¨ï¼‰

```json
{
  "success": false,
  "code": 400,
  "message": "å•†å“åç§°å·²å­˜åœ¨",
  "data": null
}
```

## ğŸ§ª å‰ç«¯è°ƒç”¨ç¤ºä¾‹

```javascript
import { api } from '@/api/request'
import type { Product, ProductUpdateRequest } from '@/types/product'

// æ›´æ–°å•†å“å‡½æ•°
async function updateProduct(id: number, data: ProductUpdateRequest): Promise<Product> {
  try {
    const response = await api.put<Product>(`/products/${id}`, data)
    return response
  } catch (error) {
    console.error('æ›´æ–°å•†å“å¤±è´¥:', error)
    throw error
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const productId = 2
const updateData: ProductUpdateRequest = {
  productName: "æ–°æ¬¾Tæ¤-å‡çº§ç‰ˆ",
  description: "çº¯æ£‰èˆ’é€‚Tæ¤ï¼Œå‡çº§ç‰ˆ",
  price: 99.99,
  discount: 5.00,
  stockQuantity: 150,
  isAvailable: true,
  category: "ç”·è£…",
  brand: "èˆ’é€‚å“ç‰Œ",
  color: "ç™½è‰²",
  size: "L",
  tags: ["æ–°å“", "çº¯æ£‰", "å‡çº§ç‰ˆ"]
}

updateProduct(productId, updateData)
  .then(product => {
    console.log('å•†å“æ›´æ–°æˆåŠŸ:', product)
    // æ›´æ–°å•†å“åˆ—è¡¨ä¸­çš„å•†å“
    productStore.updateProduct(product)
  })
  .catch(error => {
    console.error('æ›´æ–°å•†å“å¤±è´¥:', error)
    // é”™è¯¯å¤„ç†
    if (error.response?.status === 404) {
      console.error('å•†å“ä¸å­˜åœ¨')
    } else if (error.response?.status === 403) {
      console.error('æƒé™ä¸è¶³ï¼Œè¯·ç¡®è®¤æ‚¨æ˜¯è¯¥å•†å“çš„åˆ›å»ºè€…')
    } else if (error.response?.status === 400) {
      console.error('å•†å“åç§°å·²å­˜åœ¨')
    }
  })
```