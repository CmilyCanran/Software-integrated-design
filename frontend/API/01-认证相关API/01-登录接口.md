---
tags:
  - APIæ–‡æ¡£
  - è®¤è¯
  - ç™»å½•
created: 2025-11-21
modified: 2025-11-21
category: è®¤è¯API
difficulty: beginner
---

# ğŸ” ç™»å½•æ¥å£

## ğŸ“‹ æ¥å£æ¦‚è¿°

ç”¨æˆ·ç™»å½•å¹¶è·å–JWTä»¤ç‰Œï¼Œç”¨äºåç»­éœ€è¦è®¤è¯çš„APIè°ƒç”¨ã€‚

## ğŸ“ è¯·æ±‚ä¿¡æ¯

- **HTTPæ–¹æ³•**: `POST`
- **URLè·¯å¾„**: `/auth/login`
- **æƒé™è¦æ±‚**: æ— éœ€è®¤è¯

## ğŸ“¥ è¯·æ±‚å‚æ•°

### è¯·æ±‚ä½“ (Request Body)

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·å |
| password | string | æ˜¯ | å¯†ç  |

## ğŸ“¤ è¯·æ±‚ç¤ºä¾‹

```json
{
  "username": "testuser",
  "password": "password123"
}
```

## âœ… æˆåŠŸå“åº”

### å“åº”ç»“æ„

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| code | number | çŠ¶æ€ç  |
| message | string | å“åº”æ¶ˆæ¯ |
| data | object | å“åº”æ•°æ® |
| data.token | string | JWTè®¿é—®ä»¤ç‰Œ |
| data.tokenType | string | ä»¤ç‰Œç±»å‹ |
| data.expiresIn | number | ä»¤ç‰Œè¿‡æœŸæ—¶é—´(æ¯«ç§’) |
| data.user | object | ç”¨æˆ·ä¿¡æ¯ |
| data.user.id | number | ç”¨æˆ·ID |
| data.user.username | string | ç”¨æˆ·å |
| data.user.email | string | é‚®ç®± |
| data.user.role | string | ç”¨æˆ·è§’è‰²(USER/SHOPER/ADMIN) |

### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "tokenType": "Bearer",
    "expiresIn": 86400000,
    "user": {
      "id": 1,
      "username": "testuser",
      "email": "test@example.com",
      "role": "USER"
    }
  }
}
```

## âŒ é”™è¯¯å“åº”

### é”™è¯¯å“åº”ç¤ºä¾‹

```json
{
  "success": false,
  "code": 401,
  "message": "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯",
  "data": null
}
```

## ğŸ§ª å‰ç«¯è°ƒç”¨ç¤ºä¾‹

```javascript
import { api } from '@/api/request'
import type { LoginRequest, LoginResponse } from '@/types'

// ç™»å½•å‡½æ•°
async function login(data: LoginRequest): Promise<LoginResponse> {
  try {
    const response = await api.post<LoginResponse>('/auth/login', data)
    return response
  } catch (error) {
    console.error('ç™»å½•å¤±è´¥:', error)
    throw error
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const loginData = {
  username: 'testuser',
  password: 'password123'
}

login(loginData)
  .then(response => {
    console.log('ç™»å½•æˆåŠŸ:', response)
    // ä¿å­˜tokenåˆ°æœ¬åœ°å­˜å‚¨
    localStorage.setItem('token', response.token)
  })
  .catch(error => {
    console.error('ç™»å½•å¤±è´¥:', error)
  })
```