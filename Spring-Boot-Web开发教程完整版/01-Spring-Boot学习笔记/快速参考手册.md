---
tags:
  - 快速参考
  - 备忘录
  - Spring-Boot
  - 查询手册
created: 2025-11-16
modified: 2025-11-16
category: 工具
difficulty: all
---

# Spring Boot 快速参考手册

> 🚀 Spring Boot 开发者的随身查询手册，包含常用注解、配置和最佳实践速查

## 📋 目录

- [核心注解速查](#核心注解速查)
- [配置属性参考](#配置属性参考)
- [依赖注入模式](#依赖注入模式)
- [常见异常处理](#常见异常处理)
- [最佳实践检查单](#最佳实践检查单)
- [开发调试技巧](#开发调试技巧)

---

## 🏷️ 核心注解速查

### 依赖注入注解

| 注解 | 用途 | 使用场景 | 推荐程度 |
|------|------|----------|----------|
| `@Autowired` | 自动装配依赖 | 构造函数、字段、Setter | ⭐⭐⭐⭐⭐ |
| `@Qualifier` | 指定具体Bean | 多个实现时选择 | ⭐⭐⭐⭐ |
| `@Primary` | 标记首选实现 | 默认选择实现 | ⭐⭐⭐ |
| `@Lazy` | 延迟初始化 | 解决循环依赖 | ⭐⭐⭐ |

### 组件注解

| 注解 | 层级 | 用途 | 示例 |
|------|------|------|------|
| `@Component` | 通用 | 通用组件 | `@Component class Utils {}` |
| `@Service` | 业务层 | 业务逻辑 | `@Service class UserService {}` |
| `@Repository` | 数据层 | 数据访问 | `@Repository class UserDao {}` |
| `@Controller` | 控制层 | Web请求处理 | `@Controller class UserController {}` |

### 配置注解

| 注解 | 用途 | 关键属性 |
|------|------|----------|
| `@Configuration` | 配置类 | 标记Spring配置类 |
| `@Bean` | 定义Bean | name, initMethod, destroyMethod |
| `@Value` | 注入值 | 支持SpEL表达式 |
| `@PropertySource` | 加载属性文件 | value, encoding |

---

## ⚙️ 配置属性参考

### application.properties 常用配置

```properties
# 服务器配置
server.port=8080
server.servlet.context-path=/api

# 数据源配置
spring.datasource.url=jdbc:mysql://localhost:3306/db
spring.datasource.username=root
spring.datasource.password=password

# JPA配置
spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=update

# 日志配置
logging.level.root=INFO
logging.level.com.example=DEBUG
```

### application.yml 常用配置

```yaml
server:
  port: 8080
  servlet:
    context-path: /api

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/db
    username: root
    password: password
  jpa:
    show-sql: true
    hibernate:
      ddl-auto: update

logging:
  level:
    root: INFO
    com.example: DEBUG
```

---

## 🔄 依赖注入模式

### 构造函数注入（推荐）

```java
@Service
public class UserService {
    private final UserRepository userRepository;

    @Autowired  // 可省略
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
}
```

### 字段注入（不推荐）

```java
@Service
public class UserService {
    @Autowired
    private UserRepository userRepository;  // 避免使用
}
```

### Setter注入

```java
@Service
public class UserService {
    private UserRepository userRepository;

    @Autowired
    public void setUserRepository(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
}
```

---

## 🚨 常见异常处理

### NoSuchBeanDefinitionException

**原因**: 找不到对应的Bean
**解决**:
- 检查类是否添加了`@Component`等注解
- 确认包扫描路径
- 检查Bean名称拼写

### CircularDependencyException

**原因**: 循环依赖
**解决**:
- 使用`@Lazy`注解
- 重构代码消除循环依赖
- 使用Setter注入替代构造函数注入

### BeanCreationException

**原因**: Bean创建失败
**解决**:
- 检查构造函数参数
- 确认依赖Bean可用
- 查看详细错误信息

---

## ✅ 最佳实践检查单

### 项目结构检查

- [ ] 使用标准的三层架构
- [ ] 包结构清晰合理
- [ ] 配置类与业务类分离
- [ ] 避免大而全的配置类

### 依赖注入检查

- [ ] 优先使用构造函数注入
- [ ] 避免字段注入
- [ ] 使用`final`字段修饰依赖
- [ ] 合理使用`@Qualifier`和`@Primary`

### 配置管理检查

- [ ] 敏感信息使用环境变量
- [ ] 生产环境配置分离
- [ ] 使用类型安全的配置属性
- [ ] 避免硬编码配置值

### 代码质量检查

- [ ] 遵循单一职责原则
- [ ] 避免过度使用`@Autowired`
- [ ] 合理使用`@Transactional`
- [ ] 添加适当的日志记录

### Service层BaseService检查

- [ ] 所有Service继承BaseService
- [ ] 使用`executeWithLog()`统一日志记录
- [ ] 使用BaseService验证方法（`validateExists()`等）
- [ ] 保持`@RequiredArgsConstructor`一致性
- [ ] 业务方法使用日志模板包装

---

## 🔧 开发调试技巧

### 启用调试日志

```properties
# Spring框架调试
logging.level.org.springframework=DEBUG

# 自动配置报告
debug=true

# 条件评估调试
logging.level.org.springframework.boot.autoconfigure=DEBUG
```

### 查看自动配置报告

```bash
# 查看启用的自动配置
curl http://localhost:8080/actuator/conditions

# 查看Bean信息
curl http://localhost:8080/actuator/beans
```

### 常用调试注解

```java
// 查看Bean创建过程
@Component
@Profile("dev")
public class DebugBeanPostProcessor implements BeanPostProcessor {
    // 实现方法进行调试
}
```

---

## 📞 快速帮助

### 常用命令

```bash
# 启动Spring Boot应用
mvn spring-boot:run

# 查看应用信息
curl http://localhost:8080/actuator/info

# 查看健康状态
curl http://localhost:8080/actuator/health
```

### 官方文档

- [Spring Boot Reference](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/)
- [Spring Framework Reference](https://docs.spring.io/spring-framework/docs/current/reference/html/)

---

## 🛠️ BaseService方法速查表

### 日志记录模板方法

| 方法 | 用途 | 参数 | 返回值 | 示例 |
|------|------|------|--------|------|
| `executeWithLog()` | 执行带日志的操作 | `operation`, `supplier`, `params` | `T` | `executeWithLog("创建用户", () -> {...}, username)` |
| `executeWithLogAndIO()` | 执行带日志的IO操作 | `operation`, `supplier`, `params` | `T` | `executeWithLogAndIO("上传文件", () -> {...}, filename)` |
| `executeInTransaction()` | 在事务中执行操作 | `operation`, `supplier` | `T` | `executeInTransaction("处理订单", () -> {...})` |

### 数据验证工具方法

| 方法 | 用途 | 参数 | 异常 | 示例 |
|------|------|------|------|------|
| `validateExists()` | 验证实体存在性 | `optional`, `entityName`, `id` | `RuntimeException` | `validateExists(repo.findById(id), "用户", id)` |
| `validateExists()` | 验证存在性（自定义消息） | `optional`, `errorMessage` | `RuntimeException` | `validateExists(repo.findById(id), "用户不存在")` |
| `validateUnique()` | 验证唯一性 | `exists`, `entityName`, `value` | `RuntimeException` | `validateUnique(repo.existsByName(name), "名称", name)` |
| `validatePositive()` | 验证正数（>0） | `value`, `fieldName` | `RuntimeException` | `validatePositive(price, "价格")` |
| `validateNonNegative()` | 验证非负数（≥0） | `value`, `fieldName` | `RuntimeException` | `validateNonNegative(stock, "库存")` |

### 分页工具方法

| 方法 | 用途 | 参数 | 返回值 | 示例 |
|------|------|------|--------|------|
| `buildPageable()` | 构建分页请求 | `page`, `size`, `sortBy`, `sortDirection` | `Pageable` | `buildPageable(0, 10, "createdAt", "DESC")` |

### 日志输出格式

**开始日志**：
```
开始创建用户: params=[username, email]
开始查询商品: params=[商品ID]
```

**成功日志**：
```
创建用户成功: result=User{id=1, username='test', ...}
查询商品成功: result=Product{...}
```

**失败日志**：
```
创建用户失败: reason=用户名已存在: test
查询商品失败: reason=商品不存在: 123
```

### Service继承模板

```java
@Slf4j
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class YourService extends BaseService {

    private final YourRepository repository;

    // 查询方法
    public EntityDTO getEntity(Long id) {
        return executeWithLog("查询实体", () -> {
            Entity entity = validateExists(repository.findById(id), "实体", id);
            return EntityDTO.from(entity);
        }, id);
    }

    // 创建方法
    @Transactional
    public EntityDTO createEntity(CreateRequest request) {
        return executeWithLog("创建实体", () -> {
            // 验证唯一性
            validateUnique(repository.existsByName(request.getName()), "名称", request.getName());

            // 验证正数
            validatePositive(request.getPrice(), "价格");

            // 业务逻辑
            Entity entity = new Entity();
            // ... 设置属性

            return EntityDTO.from(repository.save(entity));
        }, request.getName());
    }

    // 更新方法
    @Transactional
    public EntityDTO updateEntity(Long id, UpdateRequest request) {
        return executeInTransaction("更新实体", () -> {
            Entity entity = validateExists(repository.findById(id), "实体", id);

            // 更新逻辑
            entity.updateFields(request);

            return EntityDTO.from(repository.save(entity));
        });
    }
}
```

---

> 💡 **提示**: 将此页面加入浏览器收藏夹，开发时随时查阅。定期更新此手册以保持内容的时效性。

**最后更新**: 2025-12-01
**适用版本**: Spring Boot 2.x/3.x