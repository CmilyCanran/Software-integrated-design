---
tags:
  - æƒé™æ§åˆ¶
  - è·¯ç”±å®ˆå«
  - è®¤è¯ç³»ç»Ÿ
  - è§’è‰²ç®¡ç†
  - Vue Router
  - Vue3
created: 2025-11-18
modified: 2025-11-18
category: Vueæ ¸å¿ƒæ¦‚å¿µ
difficulty: advanced
---

# æƒé™æ§åˆ¶é€»è¾‘è¯¦è§£

> **å­¦ä¹ ç›®æ ‡**ï¼šæ·±å…¥ç†è§£Vue Routerçš„æƒé™æ§åˆ¶ç³»ç»Ÿï¼ŒæŒæ¡å®Œæ•´çš„è®¤è¯æˆæƒå®ç°æœºåˆ¶ï¼Œèƒ½å¤Ÿæ„å»ºä¼ä¸šçº§çš„æƒé™ç®¡ç†ä½“ç³»

## ğŸ¯ å›é¡¾ä½ çš„é¡¹ç›®æƒé™ç³»ç»Ÿ

åœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œå·²ç»å®ç°äº†ä¸€å¥—å®Œæ•´çš„æƒé™æ§åˆ¶é€»è¾‘ï¼š

```javascript
// router/index.js
router.beforeEach((to, from, next) => {
  const authStore = useAuthStore()

  // ğŸ”¥ ç™»å½•çŠ¶æ€æ£€æŸ¥
  if (to.meta.requiresAuth && !authStore.isLoggedIn) {
    next({ path: '/login', query: { redirect: to.fullPath } })
    return
  }

  // ğŸ”¥ è§’è‰²æƒé™æ£€æŸ¥
  if (to.meta.roles && authStore.isLoggedIn) {
    const hasRequiredRole = to.meta.roles.some(role =>
      authStore.user.roles.includes(role)
    )
    if (!hasRequiredRole) {
      next('/403')
      return
    }
  }

  // ğŸ”¥ è®¿å®¢æ¨¡å¼æ£€æŸ¥
  if (to.meta.guest && authStore.isLoggedIn) {
    next('/')
    return
  }

  next() // å…è®¸è®¿é—®
})
```

è¿™ä¸ªæƒé™ç³»ç»Ÿæ¶µç›–äº†ç™»å½•çŠ¶æ€ã€è§’è‰²æƒé™ã€è®¿å®¢æ¨¡å¼ç­‰å¤šä¸ªç»´åº¦ã€‚è®©æˆ‘ä»¬æ·±å…¥è§£ææ¯ä¸ªç»†èŠ‚ã€‚

---

## ğŸ” æƒé™æ§åˆ¶çš„æ ¸å¿ƒæ¦‚å¿µ

### ğŸ“‹ è®¤è¯ vs æˆæƒ

```javascript
// ğŸ”¥ è®¤è¯ (Authentication)ï¼šç¡®è®¤ç”¨æˆ·èº«ä»½
// é—®é¢˜ï¼šä½ æ˜¯è°ï¼Ÿ
// è§£å†³æ–¹æ¡ˆï¼šç™»å½•éªŒè¯ã€TokenéªŒè¯ã€SessionéªŒè¯

const authStore = useAuthStore()
const isLoggedIn = authStore.isLoggedIn      // ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
const user = authStore.user                 // ç”¨æˆ·ä¿¡æ¯
const token = authStore.token               // è®¤è¯ä»¤ç‰Œ

// ğŸ”¥ æˆæƒ (Authorization)ï¼šç¡®è®¤ç”¨æˆ·æƒé™
// é—®é¢˜ï¼šä½ èƒ½åšä»€ä¹ˆï¼Ÿ
// è§£å†³æ–¹æ¡ˆï¼šè§’è‰²æ£€æŸ¥ã€æƒé™åˆ—è¡¨ã€èµ„æºæ§åˆ¶

const userRoles = user.roles                // ç”¨æˆ·è§’è‰²ï¼š['user', 'admin']
const userPermissions = user.permissions    // ç”¨æˆ·æƒé™ï¼š['read', 'write', 'delete']
const canAccess = hasPermission('admin')   // æ˜¯å¦æœ‰ç®¡ç†å‘˜æƒé™
```

### ğŸ¯ æƒé™æ§åˆ¶çš„å±‚æ¬¡ç»“æ„

```javascript
// æƒé™æ§åˆ¶çš„å¤šå±‚æ¶æ„ï¼š
//
// 1. è·¯ç”±çº§æƒé™
//    - ç”¨æˆ·èƒ½å¦è®¿é—®æŸä¸ªé¡µé¢
//    - é…ç½®ï¼šmeta.requiresAuth, meta.roles
//
// 2. ç»„ä»¶çº§æƒé™
//    - ç”¨æˆ·èƒ½å¦çœ‹åˆ°æŸä¸ªç»„ä»¶
//    - å®ç°ï¼šv-if="hasRole('admin')"
//
// 3. åŠŸèƒ½çº§æƒé™
//    - ç”¨æˆ·èƒ½å¦æ‰§è¡ŒæŸä¸ªæ“ä½œ
//    - å®ç°ï¼š@click="checkPermission(() => deleteItem())"
//
// 4. æ•°æ®çº§æƒé™
//    - ç”¨æˆ·èƒ½å¦æŸ¥çœ‹æŸäº›æ•°æ®
//    - å®ç°ï¼šAPIå±‚é¢çš„æ•°æ®è¿‡æ»¤
```

---

## ğŸ›¡ï¸ è·¯ç”±å®ˆå«çš„æƒé™å®ç°

### ğŸ“‹ å®Œæ•´çš„æƒé™å®ˆå«å®ç°

```javascript
// router/guards/auth.js
import { useAuthStore } from '@/stores/auth'

export function setupAuthGuard(router) {
  router.beforeEach(async (to, from, next) => {
    console.log(`ğŸ” æƒé™æ£€æŸ¥: ${from.path} â†’ ${to.path}`)

    const authStore = useAuthStore()

    // ğŸ”¥ ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥Tokenæœ‰æ•ˆæ€§
    if (authStore.token && !authStore.user) {
      try {
        await authStore.fetchUserInfo()
        console.log('âœ… ç”¨æˆ·ä¿¡æ¯å·²åˆ·æ–°')
      } catch (error) {
        console.error('âŒ Tokenæ— æ•ˆï¼Œæ¸…é™¤ç™»å½•çŠ¶æ€')
        authStore.logout()
        return next('/login')
      }
    }

    // ğŸ”¥ ç¬¬äºŒæ­¥ï¼šå…¬å¼€è·¯ç”±æ£€æŸ¥
    if (to.meta.public) {
      console.log('ğŸŒ å…¬å¼€è·¯ç”±ï¼Œç›´æ¥è®¿é—®')
      return next()
    }

    // ğŸ”¥ ç¬¬ä¸‰æ­¥ï¼šç™»å½•çŠ¶æ€æ£€æŸ¥
    if (to.meta.requiresAuth && !authStore.isLoggedIn) {
      console.log('ğŸš« éœ€è¦ç™»å½•ä½†æœªç™»å½•ï¼Œè·³è½¬ç™»å½•é¡µ')
      return next({
        path: '/login',
        query: { redirect: to.fullPath }
      })
    }

    // ğŸ”¥ ç¬¬å››æ­¥ï¼šè®¿å®¢æ¨¡å¼æ£€æŸ¥
    if (to.meta.guest && authStore.isLoggedIn) {
      console.log('ğŸ‘¤ å·²ç™»å½•ç”¨æˆ·è®¿é—®è®¿å®¢é¡µé¢ï¼Œè·³è½¬é¦–é¡µ')
      return next('/')
    }

    // ğŸ”¥ ç¬¬äº”æ­¥ï¼šè§’è‰²æƒé™æ£€æŸ¥
    if (to.meta.roles && authStore.isLoggedIn) {
      const userRoles = authStore.user?.roles || []
      const requiredRoles = to.meta.roles

      console.log('ğŸ‘¥ è§’è‰²æ£€æŸ¥:', { userRoles, requiredRoles })

      const hasRequiredRole = requiredRoles.some(role =>
        userRoles.includes(role)
      )

      if (!hasRequiredRole) {
        console.log('âŒ è§’è‰²æƒé™ä¸è¶³')
        return next('/403')
      }
    }

    // ğŸ”¥ ç¬¬å…­æ­¥ï¼šå…·ä½“æƒé™æ£€æŸ¥
    if (to.meta.permissions && authStore.isLoggedIn) {
      const userPermissions = authStore.user?.permissions || []
      const requiredPermissions = to.meta.permissions

      console.log('ğŸ”‘ æƒé™æ£€æŸ¥:', { userPermissions, requiredPermissions })

      const hasRequiredPermissions = requiredPermissions.every(permission =>
        userPermissions.includes(permission)
      )

      if (!hasRequiredPermissions) {
        console.log('âŒ æ“ä½œæƒé™ä¸è¶³')
        return next('/403')
      }
    }

    // ğŸ”¥ ç¬¬ä¸ƒæ­¥ï¼šéƒ¨é—¨æƒé™æ£€æŸ¥
    if (to.meta.department && authStore.isLoggedIn) {
      const userDepartment = authStore.user?.department
      const requiredDepartment = to.meta.department

      console.log('ğŸ¢ éƒ¨é—¨æ£€æŸ¥:', { userDepartment, requiredDepartment })

      if (userDepartment !== requiredDepartment) {
        console.log('âŒ éƒ¨é—¨æƒé™ä¸è¶³')
        return next('/403')
      }
    }

    // ğŸ”¥ ç¬¬å…«æ­¥ï¼šæƒé™çº§åˆ«æ£€æŸ¥
    if (to.meta.level && authStore.isLoggedIn) {
      const userLevel = authStore.user?.level || 0
      const requiredLevel = to.meta.level

      console.log('ğŸ“Š çº§åˆ«æ£€æŸ¥:', { userLevel, requiredLevel })

      if (userLevel < requiredLevel) {
        console.log('âŒ æƒé™çº§åˆ«ä¸è¶³')
        return next('/403')
      }
    }

    // ğŸ”¥ ç¬¬ä¹æ­¥ï¼šåŠ¨æ€æƒé™æ£€æŸ¥ï¼ˆå‡½æ•°ï¼‰
    if (to.meta.hasPermission && typeof to.meta.hasPermission === 'function') {
      try {
        const hasDynamicPermission = await to.meta.hasPermission(authStore.user, to)
        console.log('ğŸ”„ åŠ¨æ€æƒé™æ£€æŸ¥:', hasDynamicPermission)

        if (!hasDynamicPermission) {
          console.log('âŒ åŠ¨æ€æƒé™æ£€æŸ¥å¤±è´¥')
          return next('/403')
        }
      } catch (error) {
        console.error('âŒ åŠ¨æ€æƒé™æ£€æŸ¥å‡ºé”™:', error)
        return next('/403')
      }
    }

    console.log('âœ… æƒé™æ£€æŸ¥é€šè¿‡')
    next()
  })

  // ğŸ”¥ æƒé™æ£€æŸ¥å¤±è´¥çš„åç»­å¤„ç†
  router.afterEach((to) => {
    // è®°å½•è®¿é—®æ—¥å¿—
    if (to.meta.requiresAuth) {
      console.log(`ğŸ“ æƒé™è®¿é—®æ—¥å¿—: ${to.path}`)
    }
  })

  // ğŸ”¥ é”™è¯¯å¤„ç†
  router.onError((error) => {
    console.error('âŒ è·¯ç”±é”™è¯¯:', error)

    if (error.message.includes('Failed to fetch dynamically imported module')) {
      // æ‡’åŠ è½½å¤±è´¥å¤„ç†
      console.log('ğŸ”„ æ‡’åŠ è½½å¤±è´¥ï¼Œé‡è¯•ä¸­...')
      window.location.reload()
    }
  })
}
```

### ğŸ¯ å¤æ‚æƒé™åœºæ™¯å¤„ç†

```javascript
// router/guards/advanced-permissions.js
export function setupAdvancedPermissions(router) {
  router.beforeEach(async (to, from, next) => {
    const authStore = useAuthStore()

    // ğŸ”¥ åœºæ™¯1ï¼šè¯•ç”¨æœŸç”¨æˆ·é™åˆ¶
    if (to.meta.trialRestricted && authStore.isTrialUser) {
      const trialExpired = authStore.isTrialExpired
      if (trialExpired) {
        return next('/trial-expired')
      }
    }

    // ğŸ”¥ åœºæ™¯2ï¼šIPç™½åå•æ£€æŸ¥
    if (to.meta.ipWhitelist && !isIPAllowed(authStore.userIP)) {
      return next('/ip-restricted')
    }

    // ğŸ”¥ åœºæ™¯3ï¼šæ—¶é—´çª—å£é™åˆ¶
    if (to.meta.timeWindow && !isInTimeWindow(to.meta.timeWindow)) {
      return next('/time-restricted')
    }

    // ğŸ”¥ åœºæ™¯4ï¼šåœ°ç†ä½ç½®é™åˆ¶
    if (to.meta.geoRestricted && !isGeoAllowed(authStore.userLocation)) {
      return next('/geo-restricted')
    }

    // ğŸ”¥ åœºæ™¯5ï¼šè®¾å¤‡é™åˆ¶
    if (to.meta.deviceLimit && !isDeviceAllowed(authStore.deviceInfo)) {
      return next('/device-restricted')
    }

    // ğŸ”¥ åœºæ™¯6ï¼šå¹¶å‘ç™»å½•é™åˆ¶
    if (to.meta.singleSession && authStore.hasConcurrentSession) {
      return next('/session-conflict')
    }

    // ğŸ”¥ åœºæ™¯7ï¼šåŠŸèƒ½æ¨¡å—æƒé™
    if (to.meta.module && !hasModuleAccess(to.meta.module)) {
      return next('/module-restricted')
    }

    next()
  })
}

// è¾…åŠ©å‡½æ•°
function isIPAllowed(userIP) {
  const whitelist = ['192.168.1.0/24', '10.0.0.0/8']
  return whitelist.some(range => ipInRange(userIP, range))
}

function isInTimeWindow(timeWindow) {
  const now = new Date()
  const start = new Date(timeWindow.start)
  const end = new Date(timeWindow.end)
  return now >= start && now <= end
}

function isGeoAllowed(userLocation) {
  const allowedCountries = ['CN', 'US', 'JP']
  return allowedCountries.includes(userLocation.country)
}

function isDeviceAllowed(deviceInfo) {
  const maxDevices = 3
  const userDevices = getUserDevices(authStore.user.id)
  return userDevices.length <= maxDevices
}

function hasModuleAccess(module) {
  const userModules = authStore.user.modules || []
  return userModules.includes(module)
}
```

---

## ğŸ—ï¸ æƒé™æ•°æ®ç»“æ„è®¾è®¡

### ğŸ“‹ ç”¨æˆ·æƒé™æ•°æ®æ¨¡å‹

```javascript
// stores/auth.js
export const useAuthStore = defineStore('auth', () => {
  const user = ref(null)
  const token = ref(localStorage.getItem('token'))
  const permissions = ref([])
  const roles = ref([])

  // ğŸ”¥ å®Œæ•´çš„ç”¨æˆ·æƒé™æ•°æ®ç»“æ„
  const userPermissions = computed(() => {
    if (!user.value) return []

    return {
      // åŸºç¡€ä¿¡æ¯
      id: user.value.id,
      username: user.value.username,
      email: user.value.email,

      // è§’è‰²ä¿¡æ¯
      roles: user.value.roles || [],                    // ['user', 'admin', 'moderator']
      primaryRole: user.value.primaryRole,             // 'user'
      roleLevel: user.value.roleLevel,                 // 3

      // æƒé™åˆ—è¡¨
      permissions: user.value.permissions || [],        // ['read', 'write', 'delete']
      grantedPermissions: user.value.grantedPermissions || [], // æˆäºˆæƒé™
      deniedPermissions: user.value.deniedPermissions || [],   // æ‹’ç»æƒé™

      // éƒ¨é—¨ä¿¡æ¯
      department: user.value.department,               // 'engineering'
      departmentLevel: user.value.departmentLevel,     // 2
      managedDepartments: user.value.managedDepartments || [], // ç®¡ç†çš„éƒ¨é—¨

      // ç»„ç»‡æ¶æ„
      organization: user.value.organization,           // 'company-a'
      organizationLevel: user.value.organizationLevel, // 3
      reportingTo: user.value.reportingTo,             // ä¸Šçº§ID

      // åŠŸèƒ½æƒé™
      modules: user.value.modules || [],               // ['dashboard', 'analytics', 'reports']
      features: user.value.features || [],             // ['export', 'import', 'batch']
      resources: user.value.resources || [],           // ['user-management', 'financial-data']

      // é™åˆ¶ä¿¡æ¯
      limits: {
        maxUsers: user.value.maxUsers || 10,
        maxProjects: user.value.maxProjects || 5,
        storageQuota: user.value.storageQuota || 1000, // MB
        apiCallsPerHour: user.value.apiCallsPerHour || 1000
      },

      // æ—¶é—´ç›¸å…³
      trialEndsAt: user.value.trialEndsAt,
      lastLoginAt: user.value.lastLoginAt,
      passwordExpiresAt: user.value.passwordExpiresAt,

      // çŠ¶æ€ä¿¡æ¯
      isActive: user.value.isActive,
      isEmailVerified: user.value.isEmailVerified,
      isTwoFactorEnabled: user.value.isTwoFactorEnabled,

      // å®‰å…¨ä¿¡æ¯
      allowedIPs: user.value.allowedIPs || [],
      deviceWhitelist: user.value.deviceWhitelist || [],
      sessionTimeout: user.value.sessionTimeout || 3600,

      // å®¡è®¡ä¿¡æ¯
      createdAt: user.value.createdAt,
      updatedAt: user.value.updatedAt,
      lastPasswordChange: user.value.lastPasswordChange
    }
  })

  // ğŸ”¥ æƒé™æ£€æŸ¥æ–¹æ³•
  const hasRole = (role) => {
    return roles.value.includes(role)
  }

  const hasPermission = (permission) => {
    return permissions.value.includes(permission)
  }

  const hasAnyRole = (roleList) => {
    return roleList.some(role => roles.value.includes(role))
  }

  const hasAllRoles = (roleList) => {
    return roleList.every(role => roles.value.includes(role))
  }

  const hasAnyPermission = (permissionList) => {
    return permissionList.some(permission => permissions.value.includes(permission))
  }

  const hasAllPermissions = (permissionList) => {
    return permissionList.every(permission => permissions.value.includes(permission))
  }

  // ğŸ”¥ é«˜çº§æƒé™æ£€æŸ¥
  const canAccessResource = (resource, action = 'read') => {
    const permission = `${resource}:${action}`
    return hasPermission(permission)
  }

  const canManageUser = (targetUserId) => {
    // æ£€æŸ¥æ˜¯å¦èƒ½ç®¡ç†æŒ‡å®šç”¨æˆ·
    if (hasRole('admin')) return true
    if (hasPermission('user:manage')) return true

    // ä¸‹çº§ç®¡ç†æƒé™
    const managingUsers = user.value?.managingUsers || []
    return managingUsers.includes(targetUserId)
  }

  const canAccessDepartment = (departmentId) => {
    if (hasRole('admin')) return true

    const userDept = user.value?.department
    const managedDepts = user.value?.managedDepartments || []

    return userDept === departmentId || managedDepts.includes(departmentId)
  }

  const isWithinLimits = (type, value) => {
    const limits = userPermissions.value.limits
    return value <= (limits[`max${type.charAt(0).toUpperCase() + type.slice(1)}`] || Infinity)
  }

  return {
    user,
    token,
    permissions,
    roles,
    userPermissions,
    hasRole,
    hasPermission,
    hasAnyRole,
    hasAllRoles,
    hasAnyPermission,
    hasAllPermissions,
    canAccessResource,
    canManageUser,
    canAccessDepartment,
    isWithinLimits
  }
})
```

---

## ğŸ¨ ç»„ä»¶çº§æƒé™æ§åˆ¶

### ğŸ“‹ æƒé™æŒ‡ä»¤å®ç°

```javascript
// directives/permission.js
import { useAuthStore } from '@/stores/auth'

export const permission = {
  mounted(el, binding) {
    const authStore = useAuthStore()
    const { value } = binding

    // ğŸ”¥ æƒé™æ£€æŸ¥é€»è¾‘
    const checkPermission = () => {
      if (!value) return true

      // æ”¯æŒå¤šç§æ ¼å¼ï¼š
      // v-permission="'admin'"
      // v-permission="['admin', 'moderator']"
      // v-permission="{ roles: ['admin'], permissions: ['user:manage'] }"

      if (typeof value === 'string') {
        // å•ä¸ªè§’è‰²æ£€æŸ¥
        return authStore.hasRole(value)
      } else if (Array.isArray(value)) {
        // å¤šä¸ªè§’è‰²æ£€æŸ¥ï¼ˆä»»ä¸€ï¼‰
        return authStore.hasAnyRole(value)
      } else if (typeof value === 'object') {
        // å¤æ‚æƒé™æ£€æŸ¥
        const { roles, permissions, requireAll = false } = value

        let hasRoles = true
        let hasPermissions = true

        if (roles) {
          hasRoles = requireAll
            ? authStore.hasAllRoles(roles)
            : authStore.hasAnyRole(roles)
        }

        if (permissions) {
          hasPermissions = requireAll
            ? authStore.hasAllPermissions(permissions)
            : authStore.hasAnyPermission(permissions)
        }

        return hasRoles && hasPermissions
      }

      return false
    }

    // ğŸ”¥ åº”ç”¨æƒé™æ£€æŸ¥ç»“æœ
    if (!checkPermission()) {
      el.style.display = 'none'
      el.setAttribute('data-permission-denied', 'true')
    } else {
      el.style.display = ''
      el.removeAttribute('data-permission-denied')
    }
  },

  updated(el, binding) {
    // æƒé™å˜åŒ–æ—¶é‡æ–°æ£€æŸ¥
    permission.mounted(el, binding)
  }
}

// æ³¨å†ŒæŒ‡ä»¤
app.directive('permission', permission)
```

### ğŸ¯ ç»„ä»¶æƒé™ä½¿ç”¨ç¤ºä¾‹

```vue
<template>
  <div class="admin-panel">
    <!-- ğŸ”¥ åŸºç¡€è§’è‰²æƒé™ -->
    <button v-permission="'admin'">ç®¡ç†å‘˜æŒ‰é’®</button>

    <!-- ğŸ”¥ å¤šè§’è‰²æƒé™ -->
    <button v-permission="['admin', 'moderator']">ç®¡ç†æŒ‰é’®</button>

    <!-- ğŸ”¥ å¤æ‚æƒé™æ£€æŸ¥ -->
    <div v-permission="{
      roles: ['admin'],
      permissions: ['user:manage'],
      requireAll: true
    }">
      ç”¨æˆ·ç®¡ç†é¢æ¿
    </div>

    <!-- ğŸ”¥ åŠŸèƒ½çº§æƒé™ -->
    <section>
      <h3>æ•°æ®ç®¡ç†</h3>

      <!-- åªè¯»æƒé™ -->
      <DataTable v-if="canReadData" :data="tableData" />

      <!-- ç¼–è¾‘æƒé™ -->
      <button
        v-if="canEditData"
        @click="editData"
        v-permission="'data:edit'"
      >
        ç¼–è¾‘æ•°æ®
      </button>

      <!-- åˆ é™¤æƒé™ -->
      <button
        v-if="canDeleteData"
        @click="deleteData"
        v-permission="'data:delete'"
      >
        åˆ é™¤æ•°æ®
      </button>
    </section>

    <!-- ğŸ”¥ åŠ¨æ€æƒé™æ¸²æŸ“ -->
    <template v-for="module in availableModules" :key="module.id">
      <ModuleCard
        v-if="hasModuleAccess(module)"
        :module="module"
      />
    </template>

    <!-- ğŸ”¥ æƒé™é®ç½© -->
    <div class="restricted-feature">
      <FeatureContent />
      <div v-if="!hasPremiumAccess" class="permission-overlay">
        <p>éœ€è¦é«˜çº§æƒé™æ‰èƒ½ä½¿ç”¨æ­¤åŠŸèƒ½</p>
        <button @click="upgradePlan">å‡çº§è´¦å·</button>
      </div>
    </div>
  </div>
</template>

<script setup>
import { computed } from 'vue'
import { useAuthStore } from '@/stores/auth'

const authStore = useAuthStore()

// ğŸ”¥ åŠŸèƒ½æƒé™è®¡ç®—å±æ€§
const canReadData = computed(() => authStore.hasPermission('data:read'))
const canEditData = computed(() => authStore.hasPermission('data:edit'))
const canDeleteData = computed(() => authStore.hasPermission('data:delete'))
const hasPremiumAccess = computed(() => authStore.hasRole('premium'))

// ğŸ”¥ æ¨¡å—è®¿é—®æƒé™
const availableModules = computed(() => {
  const allModules = [
    { id: 'analytics', name: 'æ•°æ®åˆ†æ', requiredRole: 'user' },
    { id: 'reports', name: 'æŠ¥è¡¨ä¸­å¿ƒ', requiredRole: 'admin' },
    { id: 'settings', name: 'ç³»ç»Ÿè®¾ç½®', requiredRole: 'super_admin' }
  ]

  return allModules.filter(module =>
    authStore.hasRole(module.requiredRole)
  )
})

// ğŸ”¥ æ¨¡å—è®¿é—®æ£€æŸ¥
function hasModuleAccess(module) {
  return authStore.hasRole(module.requiredRole)
}

// ğŸ”¥ æ“ä½œæƒé™æ£€æŸ¥
function editData() {
  if (!authStore.canAccessResource('data', 'edit')) {
    alert('æ²¡æœ‰ç¼–è¾‘æƒé™')
    return
  }
  // æ‰§è¡Œç¼–è¾‘æ“ä½œ
}

function deleteData() {
  if (!authStore.canAccessResource('data', 'delete')) {
    alert('æ²¡æœ‰åˆ é™¤æƒé™')
    return
  }
  // æ‰§è¡Œåˆ é™¤æ“ä½œ
}

function upgradePlan() {
  // è·³è½¬åˆ°å‡çº§é¡µé¢
  router.push('/upgrade')
}
</script>

<style scoped>
.permission-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
}

.restricted-feature {
  position: relative;
}
</style>
```

---

## ğŸ”„ APIçº§æƒé™æ§åˆ¶

### ğŸ“‹ è¯·æ±‚æ‹¦æˆªå™¨æƒé™éªŒè¯

```javascript
// services/http.js
import { useAuthStore } from '@/stores/auth'
import { ElMessage } from 'element-plus'

class HttpClient {
  constructor() {
    this.baseURL = import.meta.env.VITE_API_BASE_URL
    this.setupInterceptors()
  }

  setupInterceptors() {
    // ğŸ”¥ è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ è®¤è¯ä¿¡æ¯
    this.instance.interceptors.request.use(
      (config) => {
        const authStore = useAuthStore()

        // æ·»åŠ Token
        if (authStore.token) {
          config.headers.Authorization = `Bearer ${authStore.token}`
        }

        // æ·»åŠ ç”¨æˆ·ä¿¡æ¯ï¼ˆç”¨äºæœåŠ¡ç«¯æƒé™éªŒè¯ï¼‰
        if (authStore.user) {
          config.headers['X-User-ID'] = authStore.user.id
          config.headers['X-User-Roles'] = authStore.user.roles.join(',')
        }

        // æ·»åŠ è¯·æ±‚æ—¶é—´æˆ³
        config.headers['X-Request-Time'] = Date.now()

        console.log(`ğŸš€ APIè¯·æ±‚: ${config.method?.toUpperCase()} ${config.url}`)
        return config
      },
      (error) => {
        console.error('âŒ è¯·æ±‚æ‹¦æˆªå™¨é”™è¯¯:', error)
        return Promise.reject(error)
      }
    )

    // ğŸ”¥ å“åº”æ‹¦æˆªå™¨ - æƒé™éªŒè¯å¤„ç†
    this.instance.interceptors.response.use(
      (response) => {
        console.log(`âœ… APIå“åº”: ${response.config.url} - ${response.status}`)
        return response
      },
      async (error) => {
        const { response, config } = error
        const authStore = useAuthStore()

        // ğŸ”¥ æƒé™ç›¸å…³é”™è¯¯å¤„ç†
        if (response) {
          switch (response.status) {
            case 401:
              // æœªæˆæƒ - Tokenå¤±æ•ˆ
              console.warn('âš ï¸ Tokenå¤±æ•ˆï¼Œé‡æ–°ç™»å½•')
              authStore.logout()
              router.push('/login?message=token_expired')
              break

            case 403:
              // æƒé™ä¸è¶³
              console.warn('âš ï¸ æƒé™ä¸è¶³')
              ElMessage.error('æ²¡æœ‰æƒé™æ‰§è¡Œæ­¤æ“ä½œ')
              break

            case 429:
              // è¯·æ±‚é¢‘ç‡é™åˆ¶
              console.warn('âš ï¸ è¯·æ±‚è¿‡äºé¢‘ç¹')
              ElMessage.warning('è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•')
              break

            default:
              // å…¶ä»–é”™è¯¯
              ElMessage.error(response.data?.message || 'è¯·æ±‚å¤±è´¥')
          }
        }

        // ğŸ”¥ Tokenåˆ·æ–°æœºåˆ¶
        if (response?.status === 401 && !config._retry) {
          config._retry = true

          try {
            await authStore.refreshToken()
            // é‡æ–°å‘é€åŸè¯·æ±‚
            return this.instance(config)
          } catch (refreshError) {
            // åˆ·æ–°å¤±è´¥ï¼Œè·³è½¬ç™»å½•
            authStore.logout()
            router.push('/login')
          }
        }

        return Promise.reject(error)
      }
    )
  }

  // ğŸ”¥ å¸¦æƒé™æ£€æŸ¥çš„è¯·æ±‚æ–¹æ³•
  async requestWithPermission(config, requiredPermission) {
    const authStore = useAuthStore()

    // å‰ç«¯æƒé™é¢„æ£€
    if (requiredPermission && !authStore.hasPermission(requiredPermission)) {
      throw new Error(`æƒé™ä¸è¶³: éœ€è¦ ${requiredPermission} æƒé™`)
    }

    try {
      return await this.instance(config)
    } catch (error) {
      console.error('æƒé™æ£€æŸ¥è¯·æ±‚å¤±è´¥:', error)
      throw error
    }
  }

  // ğŸ”¥ èµ„æºè®¿é—®æ–¹æ³•
  async getResource(resource, action = 'read', params = {}) {
    const permission = `${resource}:${action}`
    return this.requestWithPermission({
      method: 'GET',
      url: `/api/${resource}`,
      params
    }, permission)
  }

  async createResource(resource, data) {
    const permission = `${resource}:create`
    return this.requestWithPermission({
      method: 'POST',
      url: `/api/${resource}`,
      data
    }, permission)
  }

  async updateResource(resource, id, data) {
    const permission = `${resource}:update`
    return this.requestWithPermission({
      method: 'PUT',
      url: `/api/${resource}/${id}`,
      data
    }, permission)
  }

  async deleteResource(resource, id) {
    const permission = `${resource}:delete`
    return this.requestWithPermission({
      method: 'DELETE',
      url: `/api/${resource}/${id}`
    }, permission)
  }
}

export const httpClient = new HttpClient()
```

### ğŸ¯ APIæœåŠ¡æƒé™é›†æˆ

```javascript
// services/userService.js
import { httpClient } from './http'
import { useAuthStore } from '@/stores/auth'

export class UserService {
  // ğŸ”¥ è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆéœ€è¦ç”¨æˆ·ç®¡ç†æƒé™ï¼‰
  async getUsers(params = {}) {
    return httpClient.getResource('users', 'read', params)
  }

  // ğŸ”¥ åˆ›å»ºç”¨æˆ·ï¼ˆéœ€è¦ç”¨æˆ·åˆ›å»ºæƒé™ï¼‰
  async createUser(userData) {
    const authStore = useAuthStore()

    // é¢å¤–çš„ä¸šåŠ¡é€»è¾‘æƒé™æ£€æŸ¥
    if (!authStore.canManageUser(null)) {
      throw new Error('æ²¡æœ‰åˆ›å»ºç”¨æˆ·çš„æƒé™')
    }

    return httpClient.createResource('users', userData)
  }

  // ğŸ”¥ æ›´æ–°ç”¨æˆ·ï¼ˆéœ€è¦ç”¨æˆ·æ›´æ–°æƒé™ï¼‰
  async updateUser(userId, userData) {
    const authStore = useAuthStore()

    // æ£€æŸ¥æ˜¯å¦èƒ½ç®¡ç†ç›®æ ‡ç”¨æˆ·
    if (!authStore.canManageUser(userId)) {
      throw new Error('æ²¡æœ‰ç®¡ç†æ­¤ç”¨æˆ·çš„æƒé™')
    }

    return httpClient.updateResource('users', userId, userData)
  }

  // ğŸ”¥ åˆ é™¤ç”¨æˆ·ï¼ˆéœ€è¦ç”¨æˆ·åˆ é™¤æƒé™ï¼‰
  async deleteUser(userId) {
    const authStore = useAuthStore()

    // é˜²æ­¢åˆ é™¤è‡ªå·±
    if (userId === authStore.user?.id) {
      throw new Error('ä¸èƒ½åˆ é™¤è‡ªå·±çš„è´¦å·')
    }

    // æ£€æŸ¥ç®¡ç†æƒé™
    if (!authStore.canManageUser(userId)) {
      throw new Error('æ²¡æœ‰åˆ é™¤æ­¤ç”¨æˆ·çš„æƒé™')
    }

    return httpClient.deleteResource('users', userId)
  }

  // ğŸ”¥ è·å–ç”¨æˆ·æƒé™ä¿¡æ¯
  async getUserPermissions(userId) {
    const authStore = useAuthStore()

    // åªèƒ½æŸ¥çœ‹è‡ªå·±æˆ–ä¸‹çº§çš„æƒé™
    if (userId !== authStore.user?.id && !authStore.canManageUser(userId)) {
      throw new Error('æ²¡æœ‰æŸ¥çœ‹æ­¤ç”¨æˆ·æƒé™çš„èµ„æ ¼')
    }

    return httpClient.getResource(`users/${userId}/permissions`, 'read')
  }

  // ğŸ”¥ æ‰¹é‡æ“ä½œæƒé™æ£€æŸ¥
  async batchUpdateUsers(userIds, updateData) {
    const authStore = useAuthStore()

    // æ£€æŸ¥æ¯ä¸ªç”¨æˆ·çš„ç®¡ç†æƒé™
    for (const userId of userIds) {
      if (!authStore.canManageUser(userId)) {
        throw new Error(`æ²¡æœ‰ç®¡ç†ç”¨æˆ· ${userId} çš„æƒé™`)
      }
    }

    return httpClient.requestWithPermission({
      method: 'POST',
      url: '/api/users/batch-update',
      data: { userIds, updateData }
    }, 'user:batch-update')
  }

  // ğŸ”¥ æ•æ„Ÿæ“ä½œåŒé‡éªŒè¯
  async resetUserPassword(userId, newPassword) {
    const authStore = useAuthStore()

    // éœ€è¦ç®¡ç†å‘˜æƒé™
    if (!authStore.hasRole('admin')) {
      throw new Error('åªæœ‰ç®¡ç†å‘˜å¯ä»¥é‡ç½®å¯†ç ')
    }

    // éœ€è¦äºŒæ¬¡éªŒè¯
    if (!authStore.isTwoFactorEnabled) {
      throw new Error('è¯·å…ˆå¯ç”¨åŒå› å­è®¤è¯')
    }

    return httpClient.requestWithPermission({
      method: 'POST',
      url: `/api/users/${userId}/reset-password`,
      data: { newPassword },
      headers: {
        'X-Requires-2FA': 'true'
      }
    }, 'user:reset-password')
  }
}

export const userService = new UserService()
```

---

## ğŸ“Š æƒé™ç®¡ç†ç³»ç»Ÿç•Œé¢

### ğŸ“‹ è§’è‰²æƒé™ç®¡ç†é¡µé¢

```vue
<template>
  <div class="permission-manager">
    <div class="manager-header">
      <h2>æƒé™ç®¡ç†ä¸­å¿ƒ</h2>
      <div class="header-actions">
        <el-button @click="refreshPermissions" :loading="loading">
          åˆ·æ–°æƒé™
        </el-button>
        <el-button type="primary" @click="showRoleDialog">
          æ–°å»ºè§’è‰²
        </el-button>
      </div>
    </div>

    <el-tabs v-model="activeTab">
      <!-- ğŸ”¥ è§’è‰²ç®¡ç† -->
      <el-tab-pane label="è§’è‰²ç®¡ç†" name="roles">
        <RoleTable
          :roles="roles"
          @edit="editRole"
          @delete="deleteRole"
          @assign="assignPermissions"
        />
      </el-tab-pane>

      <!-- ğŸ”¥ æƒé™çŸ©é˜µ -->
      <el-tab-pane label="æƒé™çŸ©é˜µ" name="matrix">
        <PermissionMatrix
          :roles="roles"
          :permissions="permissions"
          @update="updatePermission"
        />
      </el-tab-pane>

      <!-- ğŸ”¥ ç”¨æˆ·æƒé™ -->
      <el-tab-pane label="ç”¨æˆ·æƒé™" name="users">
        <UserPermissionTable
          :users="users"
          @edit-user="editUserPermissions"
        />
      </el-tab-pane>

      <!-- ğŸ”¥ å®¡è®¡æ—¥å¿— -->
      <el-tab-pane label="å®¡è®¡æ—¥å¿—" name="audit">
        <AuditLogTable :logs="auditLogs" />
      </el-tab-pane>
    </el-tabs>

    <!-- ğŸ”¥ è§’è‰²ç¼–è¾‘å¯¹è¯æ¡† -->
    <RoleDialog
      v-model="roleDialogVisible"
      :role="currentRole"
      @save="saveRole"
    />

    <!-- ğŸ”¥ æƒé™åˆ†é…å¯¹è¯æ¡† -->
    <PermissionAssignDialog
      v-model="permissionDialogVisible"
      :role="currentRole"
      :permissions="permissions"
      @assign="assignPermissionsToRole"
    />
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { useAuthStore } from '@/stores/auth'
import { ElMessage } from 'element-plus'
import RoleTable from './components/RoleTable.vue'
import PermissionMatrix from './components/PermissionMatrix.vue'
import UserPermissionTable from './components/UserPermissionTable.vue'
import AuditLogTable from './components/AuditLogTable.vue'
import RoleDialog from './components/RoleDialog.vue'
import PermissionAssignDialog from './components/PermissionAssignDialog.vue'

const authStore = useAuthStore()

// ğŸ”¥ æƒé™æ£€æŸ¥
if (!authStore.hasPermission('permission:manage')) {
  throw new Error('æ²¡æœ‰æƒé™ç®¡ç†æƒé™')
}

const activeTab = ref('roles')
const loading = ref(false)

// æ•°æ®
const roles = ref([])
const permissions = ref([])
const users = ref([])
const auditLogs = ref([])

// å¯¹è¯æ¡†çŠ¶æ€
const roleDialogVisible = ref(false)
const permissionDialogVisible = ref(false)
const currentRole = ref(null)

// ğŸ”¥ åŠ è½½æƒé™æ•°æ®
async function loadPermissions() {
  loading.value = true
  try {
    const [rolesRes, permissionsRes, usersRes] = await Promise.all([
      httpClient.getResource('roles', 'read'),
      httpClient.getResource('permissions', 'read'),
      httpClient.getResource('users', 'read')
    ])

    roles.value = rolesRes.data
    permissions.value = permissionsRes.data
    users.value = usersRes.data
  } catch (error) {
    ElMessage.error('åŠ è½½æƒé™æ•°æ®å¤±è´¥')
  } finally {
    loading.value = false
  }
}

// ğŸ”¥ åˆ·æ–°æƒé™ç¼“å­˜
async function refreshPermissions() {
  try {
    await httpClient.post('/api/permissions/refresh')
    await loadPermissions()
    ElMessage.success('æƒé™ç¼“å­˜å·²åˆ·æ–°')
  } catch (error) {
    ElMessage.error('åˆ·æ–°æƒé™å¤±è´¥')
  }
}

// ğŸ”¥ æ˜¾ç¤ºè§’è‰²ç¼–è¾‘å¯¹è¯æ¡†
function showRoleDialog() {
  currentRole.value = null
  roleDialogVisible.value = true
}

function editRole(role) {
  currentRole.value = { ...role }
  roleDialogVisible.value = true
}

// ğŸ”¥ ä¿å­˜è§’è‰²
async function saveRole(roleData) {
  try {
    if (roleData.id) {
      await httpClient.updateResource('roles', roleData.id, roleData)
      ElMessage.success('è§’è‰²æ›´æ–°æˆåŠŸ')
    } else {
      await httpClient.createResource('roles', roleData)
      ElMessage.success('è§’è‰²åˆ›å»ºæˆåŠŸ')
    }

    await loadPermissions()
    roleDialogVisible.value = false
  } catch (error) {
    ElMessage.error('ä¿å­˜è§’è‰²å¤±è´¥')
  }
}

// ğŸ”¥ åˆ é™¤è§’è‰²
async function deleteRole(role) {
  try {
    await ElMessageBox.confirm(
      `ç¡®å®šè¦åˆ é™¤è§’è‰² "${role.name}" å—ï¼Ÿè¿™å°†å½±å“æ‰€æœ‰æ‹¥æœ‰æ­¤è§’è‰²çš„ç”¨æˆ·ã€‚`,
      'ç¡®è®¤åˆ é™¤',
      { type: 'warning' }
    )

    await httpClient.deleteResource('roles', role.id)
    ElMessage.success('è§’è‰²åˆ é™¤æˆåŠŸ')
    await loadPermissions()
  } catch (error) {
    if (error !== 'cancel') {
      ElMessage.error('åˆ é™¤è§’è‰²å¤±è´¥')
    }
  }
}

// ğŸ”¥ åˆ†é…æƒé™
function assignPermissions(role) {
  currentRole.value = role
  permissionDialogVisible.value = true
}

async function assignPermissionsToRole(roleId, permissionIds) {
  try {
    await httpClient.requestWithPermission({
      method: 'POST',
      url: `/api/roles/${roleId}/permissions`,
      data: { permissionIds }
    }, 'role:assign-permissions')

    ElMessage.success('æƒé™åˆ†é…æˆåŠŸ')
    await loadPermissions()
    permissionDialogVisible.value = false
  } catch (error) {
    ElMessage.error('æƒé™åˆ†é…å¤±è´¥')
  }
}

// ğŸ”¥ æ›´æ–°æƒé™çŸ©é˜µ
async function updatePermission(roleId, permissionId, granted) {
  try {
    await httpClient.requestWithPermission({
      method: 'PUT',
      url: `/api/roles/${roleId}/permissions/${permissionId}`,
      data: { granted }
    }, 'permission:update')

    ElMessage.success('æƒé™æ›´æ–°æˆåŠŸ')
    await loadPermissions()
  } catch (error) {
    ElMessage.error('æƒé™æ›´æ–°å¤±è´¥')
  }
}

onMounted(() => {
  loadPermissions()
})
</script>

<style scoped>
.permission-manager {
  padding: 20px;
}

.manager-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.header-actions {
  display: flex;
  gap: 10px;
}
</style>
```

---

## ğŸ“‹ æƒé™æ§åˆ¶æœ€ä½³å®è·µ

### ğŸ¯ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

```javascript
// utils/permission-optimization.js

// ğŸ”¥ æƒé™ç¼“å­˜æœºåˆ¶
class PermissionCache {
  constructor() {
    this.cache = new Map()
    this.ttl = 5 * 60 * 1000 // 5åˆ†é’Ÿè¿‡æœŸ
  }

  set(key, value) {
    this.cache.set(key, {
      value,
      timestamp: Date.now()
    })
  }

  get(key) {
    const item = this.cache.get(key)
    if (!item) return null

    if (Date.now() - item.timestamp > this.ttl) {
      this.cache.delete(key)
      return null
    }

    return item.value
  }

  clear() {
    this.cache.clear()
  }
}

const permissionCache = new PermissionCache()

// ğŸ”¥ ä¼˜åŒ–çš„æƒé™æ£€æŸ¥å‡½æ•°
export function checkPermission(permission, userId) {
  const cacheKey = `${userId}:${permission}`

  // æ£€æŸ¥ç¼“å­˜
  const cached = permissionCache.get(cacheKey)
  if (cached !== null) {
    return cached
  }

  // æ‰§è¡Œæƒé™æ£€æŸ¥
  const result = performPermissionCheck(permission, userId)

  // ç¼“å­˜ç»“æœ
  permissionCache.set(cacheKey, result)

  return result
}

// ğŸ”¥ æ‰¹é‡æƒé™æ£€æŸ¥
export async function checkMultiplePermissions(permissions, userId) {
  const cacheKey = `${userId}:batch:${permissions.join(',')}`

  let cached = permissionCache.get(cacheKey)
  if (cached) {
    return cached
  }

  // æ‰¹é‡æŸ¥è¯¢API
  const results = await httpClient.post('/api/permissions/batch-check', {
    permissions,
    userId
  })

  permissionCache.set(cacheKey, results.data)
  return results.data
}

// ğŸ”¥ é¢„åŠ è½½æƒé™
export function preloadPermissions(user) {
  const commonPermissions = [
    'dashboard:read',
    'users:read',
    'reports:read',
    'settings:read'
  ]

  return checkMultiplePermissions(commonPermissions, user.id)
}
```

### ğŸ” å®‰å…¨æ€§è€ƒè™‘

```javascript
// utils/permission-security.js

// ğŸ”¥ æƒé™æå‡æ£€æµ‹
export function detectPermissionElevation(oldPermissions, newPermissions) {
  const elevated = newPermissions.filter(perm => !oldPermissions.includes(perm))

  if (elevated.length > 0) {
    // è®°å½•æƒé™æå‡äº‹ä»¶
    logSecurityEvent('permission_elevation', {
      elevated,
      timestamp: Date.now()
    })

    // å‘é€å®‰å…¨è­¦æŠ¥
    sendSecurityAlert('æ£€æµ‹åˆ°æƒé™æå‡', { elevated })
  }
}

// ğŸ”¥ å¼‚å¸¸æƒé™è®¿é—®æ£€æµ‹
export function detectAbnormalAccess(userId, resource, action) {
  const key = `${userId}:${resource}:${action}`
  const now = Date.now()

  // è·å–è®¿é—®è®°å½•
  const accessLog = getAccessLog(key) || []

  // æ£€æŸ¥çŸ­æ—¶é—´å†…çš„è®¿é—®é¢‘ç‡
  const recentAccess = accessLog.filter(time => now - time < 60000) // 1åˆ†é’Ÿå†…

  if (recentAccess.length > 100) {
    // å¼‚å¸¸é«˜é¢‘è®¿é—®
    logSecurityEvent('abnormal_access_frequency', {
      userId,
      resource,
      action,
      frequency: recentAccess.length
    })

    return true
  }

  // è®°å½•æœ¬æ¬¡è®¿é—®
  accessLog.push(now)

  // ä¿ç•™æœ€è¿‘1000æ¡è®°å½•
  if (accessLog.length > 1000) {
    accessLog.splice(0, accessLog.length - 1000)
  }

  setAccessLog(key, accessLog)
  return false
}

// ğŸ”¥ æƒé™å®¡è®¡æ—¥å¿—
export function logPermissionCheck(userId, resource, action, result) {
  const auditLog = {
    userId,
    resource,
    action,
    result,
    timestamp: Date.now(),
    ip: getCurrentUserIP(),
    userAgent: navigator.userAgent
  }

  // å‘é€åˆ°å®¡è®¡æœåŠ¡
  httpClient.post('/api/audit/permission-check', auditLog)
    .catch(error => {
      console.error('å®¡è®¡æ—¥å¿—è®°å½•å¤±è´¥:', error)
    })
}
```

---

## ğŸ“‹ å­¦ä¹ æ£€æŸ¥æ¸…å•

### âœ… æƒé™æ§åˆ¶ç†è§£

- [ ] ç†è§£è®¤è¯å’Œæˆæƒçš„åŒºåˆ«
- [ ] æŒæ¡æƒé™æ§åˆ¶çš„å±‚æ¬¡ç»“æ„
- [ ] çŸ¥é“è·¯ç”±å®ˆå«çš„å·¥ä½œåŸç†
- [ ] ç†è§£æƒé™æ•°æ®ç»“æ„è®¾è®¡

### âœ… å®ç°èƒ½åŠ›æŒæ¡

- [ ] èƒ½å¤Ÿå®ç°å®Œæ•´çš„æƒé™å®ˆå«
- [ ] æŒæ¡ç»„ä»¶çº§æƒé™æ§åˆ¶
- [ ] çŸ¥é“å¦‚ä½•å®ç°APIæƒé™éªŒè¯
- [ ] èƒ½å¤Ÿè®¾è®¡æƒé™ç®¡ç†ç•Œé¢

### âœ… é«˜çº§åº”ç”¨èƒ½åŠ›

- [ ] èƒ½å¤Ÿå¤„ç†å¤æ‚æƒé™åœºæ™¯
- [ ] æŒæ¡æƒé™æ€§èƒ½ä¼˜åŒ–
- [ ] ç†è§£æƒé™å®‰å…¨è€ƒè™‘
- [ ] èƒ½å¤Ÿå®ç°æƒé™å®¡è®¡ç³»ç»Ÿ

---

## ğŸ¯ ä¸‹ä¸€æ­¥å­¦ä¹ 

æŒæ¡äº†æƒé™æ§åˆ¶é€»è¾‘åï¼Œç»§ç»­æ·±å…¥å­¦ä¹ ï¼š

- [[10-å¯¼å‡ºè¯­å¥å’Œæœ€ä½³å®è·µ.md|æœ€ä½³å®è·µ]]
- [[../01-ç»„ä»¶ç³»ç»Ÿ/03-ç»„ä»¶é€šä¿¡è¯¦è§£.md|ç»„ä»¶é€šä¿¡]]
- [[../02-çŠ¶æ€ç®¡ç†/02-Piniaé«˜çº§ç”¨æ³•.md|çŠ¶æ€ç®¡ç†]]

---

**è®°ä½ï¼šæƒé™æ§åˆ¶æ˜¯åº”ç”¨å®‰å…¨çš„åŸºçŸ³ï¼Œå®Œå–„çš„æƒé™ä½“ç³»èƒ½å¤Ÿä¿æŠ¤æ•°æ®å’ŒåŠŸèƒ½çš„å®‰å…¨ï¼** ğŸ‰

---

*è¿™ä¸ªç« èŠ‚è¯¦ç»†è§£æäº†Vue Routeræƒé™æ§åˆ¶çš„æ¯ä¸€ä¸ªæ–¹é¢ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°ä¼ä¸šçº§å®ç°ï¼Œç¡®ä¿ä½ å¯¹æƒé™ç³»ç»Ÿæœ‰å…¨é¢çš„ç†è§£å’ŒæŒæ¡ã€‚*