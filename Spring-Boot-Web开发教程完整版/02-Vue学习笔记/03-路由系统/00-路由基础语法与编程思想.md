---
tags:
  - 路由基础
  - 编程思想
  - 设计模式
  - Vue Router
  - Vue3
created: 2025-11-18
modified: 2025-11-18
category: Vue核心概念
difficulty: beginner
---

# 路由基础语法与编程思想

> **学习目标**：理解路由系统的核心概念、基础语法和设计思想，建立正确的路由编程思维

---

## 🎯 什么是路由？

### 📋 概念定义

**路由（Routing）**：根据URL地址映射到对应页面组件的机制。

```javascript
// 通俗理解：
// URL就像家庭住址，路由就像门牌号系统
// 根据不同的地址（URL），找到对应的房间（组件）

// 技术定义：
// 路由是URL路径与页面组件之间的映射关系
// 当用户访问特定URL时，显示对应的页面组件
```

### 🔄 传统页面 vs 路由系统

```javascript
// ❌ 传统多页面应用（MPA）
// 1. 用户点击链接
// 2. 浏览器发送HTTP请求
// 3. 服务器返回完整HTML页面
// 4. 浏览器重新渲染整个页面
// 结果：页面刷新，用户体验中断

// ✅ 单页面应用（SPA）路由
// 1. 用户点击链接
// 2. JavaScript拦截点击事件
// 3. 更新URL（不刷新页面）
// 4. 动态切换页面组件
// 结果：无缝切换，用户体验流畅
```

---

## 🧩 路由系统的核心思想

### 📋 声明式编程思想

```javascript
// ❌ 命令式编程（传统方式）
function showDashboard() {
  hideAllPages()
  document.getElementById('dashboard').style.display = 'block'
  updateURL('/dashboard')
}

function showLogin() {
  hideAllPages()
  document.getElementById('login').style.display = 'block'
  updateURL('/login')
}

// ✅ 声明式编程（路由方式）
// 只需声明路由规则，框架自动处理页面切换
const routes = [
  { path: '/dashboard', component: Dashboard },
  { path: '/login', component: Login }
]
```

### 🎯 配置驱动思想

```javascript
// 核心理念：配置优于代码
// 通过配置文件定义路由规则，而不是硬编码逻辑

// 路由配置 = 规则声明
const routerConfig = {
  '/': { component: Home },
  '/about': { component: About },
  '/contact': { component: Contact }
}

// 框架根据配置自动处理：
// 1. URL监听
// 2. 路由匹配
// 3. 组件渲染
// 4. 状态管理
```

---

## 🏗️ 路由系统的设计模式

### 📋 单一职责原则

```javascript
// 每个路由只负责一个功能
const routes = [
  // ✅ 职责单一
  { path: '/user/profile', component: UserProfile },     // 用户资料
  { path: '/user/settings', component: UserSettings },   // 用户设置
  { path: '/user/orders', component: UserOrders },       // 用户订单

  // ❌ 职责混乱
  {
    path: '/user',
    component: UserEverything,  // 一个组件处理所有用户相关功能
    methods: ['profile', 'settings', 'orders']  // 违反单一职责
  }
]
```

### 🔄 观察者模式

```javascript
// 路由变化时，相关组件自动响应
// 不需要手动调用，框架自动处理

// 用户操作 → URL变化 → 路由系统检测 → 组件自动更新
// ↑                           ↑                    ↑
// 用户点击链接              路由守卫检查          页面重新渲染

// 传统方式需要手动处理：
// function handleNavigation(url) {
//   hideCurrentPage()
//   showNewPage(url)
//   updateMenu()
//   updateBreadcrumb()
// }
```

---

## 📝 路由基础语法

### 🔥 路由定义语法

```javascript
// 基础语法结构
const route = {
  path: '路径',              // 必需：URL路径
  component: 组件,           // 可选：对应的Vue组件
  name: '名称',              // 可选：路由名称
  meta: {},                 // 可选：元数据
  children: []              // 可选：子路由
}

// 完整示例
const dashboardRoute = {
  path: '/dashboard',                    // URL路径
  name: 'dashboard',                      // 路由名称，用于编程式导航
  component: () => import('./Dashboard.vue'), // 懒加载组件
  meta: {                               // 元数据对象
    title: '仪表板',                    // 页面标题
    requiresAuth: true,                 // 需要认证
    icon: 'dashboard'                   // 图标
  },
  children: [                          // 嵌套路由
    {
      path: 'overview',               // 子路径：/dashboard/overview
      component: DashboardOverview
    }
  ]
}
```

### 🎯 路径匹配语法

```javascript
// 1. 静态路径匹配
{ path: '/home', component: Home }           // 精确匹配 /home
{ path: '/about', component: About }         // 精确匹配 /about

// 2. 动态路径匹配
{ path: '/user/:id', component: User }         // 匹配 /user/123, /user/456
// 访问参数：route.params.id

// 3. 多段动态路径
{ path: '/user/:id/post/:postId', component: UserPost }
// 匹配：/user/123/post/456
// 参数：{ id: '123', postId: '456' }

// 4. 可选参数
{ path: '/user/:id?', component: User }          // 匹配 /user 和 /user/123
// ? 表示参数可选

// 5. 重复参数
{ path: '/search/:keywords+', component: Search }
// 匹配：/search/vue, /search/vue/router
// 参数：['vue', 'router']

// 6. 通配符匹配
{ path: '/:pathMatch(.*)*', component: NotFound }
// 匹配所有路径，用于404页面
```

---

## 🎭 编程式导航语法

### 📋 基础导航方法

```javascript
import { useRouter } from 'vue-router'

const router = useRouter()

// 1. 字符串路径导航
router.push('/home')                    // 导航到首页
router.push('/user/123')                 // 导航到用户页面

// 2. 对象路径导航
router.push({ path: '/home' })           // 同上
router.push({ name: 'home' })            // 通过路由名称导航

// 3. 带参数导航
router.push({
  path: '/user/123',
  query: { tab: 'profile' }              // 查询参数：/user/123?tab=profile
})

// 4. 替换导航（不产生历史记录）
router.replace('/home')                 // 替换当前页面

// 5. 前进/后退
router.go(1)                            // 前进一页
router.go(-1)                           // 后退一页
router.back()                           // 后退
router.forward()                        // 前进
```

### 🔄 导航守卫语法

```javascript
// 全局前置守卫
router.beforeEach((to, from, next) => {
  // to: 即将进入的目标路由对象
  // from: 当前离开的路由对象
  // next: 必须调用的函数
})

// 全局后置守卫
router.afterEach((to, from) => {
  // 没有next函数，无法阻止导航
})

// 路由独享守卫
const routes = [
  {
    path: '/admin',
    component: Admin,
    beforeEnter: (to, from, next) => {
      // 只在进入此路由时触发
    }
  }
]

// 组件内守卫
export default {
  beforeRouteEnter(to, from, next) {
    // 进入组件前
  },
  beforeRouteUpdate(to, from, next) {
    // 路由参数变化时
  },
  beforeRouteLeave(to, from, next) {
    // 离开组件时
  }
}
```

---

## 🎨 元数据系统设计思想

### 📋 元数据的声明式特性

```javascript
// 元数据是路由的"说明书"
// 声明式地描述路由的特性和要求

const route = {
  path: '/admin',
  component: Admin,
  meta: {
    // 🔐 权限相关
    requiresAuth: true,              // 需要登录
    roles: ['admin', 'super_admin'], // 需要的角色
    permissions: ['user:manage'],    // 需要的权限

    // 🎨 界面相关
    title: '管理后台',                // 页面标题
    icon: 'admin-dashboard',          // 图标
    layout: 'admin',                 // 布局类型
    breadcrumb: true,                 // 显示面包屑

    // 🚀 性能相关
    keepAlive: true,                 // 保持组件状态
    preload: true,                   // 预加载
    cache: true                      // 缓存页面
  }
}
```

### 🎯 元数据的可扩展性

```javascript
// 元数据可以包含任意自定义字段
// 完全由开发者定义，框架不限制

// 扩展元数据示例
meta: {
  // 业务逻辑
  department: 'engineering',        // 部门权限
  level: 3,                         // 权限级别
  maxFileSize: 1024 * 1024,          // 文件大小限制

  // UI控制
  hideMenu: false,                  // 是否在菜单中隐藏
  showTabs: true,                   // 是否显示标签页
  fullscreen: false,                 // 是否全屏显示

  // 行为控制
  confirmBeforeLeave: true,          // 离开前确认
  autoSave: true,                    // 自动保存
  refreshInterval: 30000             // 刷新间隔
}
```

---

## 🔄 路由状态管理思想

### 📋 路由与状态的分离

```javascript
// ✅ 好的设计：路由负责导航，状态管理负责数据
// 路由配置
const routes = [
  { path: '/dashboard', component: Dashboard }
]

// 状态管理
const userStore = {
  user: null,
  isLoggedIn: false,
  login(userData) {
    this.user = userData
    this.isLoggedIn = true
  }
}

// ❌ 避免：在路由中管理业务状态
const routes = [
  {
    path: '/dashboard',
    component: Dashboard,
    beforeEnter() {
      // ❌ 不要在这里处理复杂的业务逻辑
      if (!checkUserPermission()) {
        return false
      }
    }
  }
]
```

### 🎯 状态与路由的协调

```javascript
// 路由守卫中检查状态
router.beforeEach((to, from, next) => {
  const userStore = useUserStore()

  // 根据状态决定路由行为
  if (to.meta.requiresAuth && !userStore.isLoggedIn) {
    next('/login')
    return
  }

  next()
})

// 组件中响应路由变化
export default {
  watch: {
    '$route'(to) {
      // 路由变化时更新组件状态
      this.loadPageData(to.params.id)
    }
  }
}
```

---

## 🚀 性能优化思想

### 📋 懒加载策略

```javascript
// ✅ 按需加载：只加载当前需要的组件
const routes = [
  {
    path: '/dashboard',
    component: () => import('./Dashboard.vue')  // 访问时才加载
  }
]

// ✅ 分组加载：相关组件一起加载
const AdminRoutes = () => import('./admin/routes.js')
const UserRoutes = () => import('./user/routes.js')

// ❌ 避免全量加载
import Dashboard from './Dashboard.vue'  // 应用启动时就加载
import Profile from './Profile.vue'
import Settings from './Settings.vue'
```

### 🎯 缓存策略

```javascript
// 组件级缓存
const routes = [
  {
    path: '/dashboard',
    component: Dashboard,
    meta: { keepAlive: true }  // 保持组件状态，避免重复渲染
  }
]

// 路由级缓存
router.beforeEach((to, from, next) => {
  // 缓存决策逻辑
  if (shouldCache(from)) {
    cacheRoute(from)
  }
  next()
})
```

---

## 📋 学习检查清单

### ✅ 基础概念理解

- [ ] 理解路由的定义和作用
- [ ] 掌握SPA和MPA的区别
- [ ] 理解声明式编程思想
- [ ] 知道配置驱动的设计模式

### ✅ 语法掌握

- [ ] 掌握路由定义语法
- [ ] 理解路径匹配规则
- [ ] 熟练使用编程式导航
- [ ] 掌握守卫语法

### ✅ 设计思想

- [ ] 理解单一职责原则
- [ ] 掌握观察者模式
- [ ] 知道元数据设计思想
- [ ] 理解性能优化策略

---

## 🎯 下一步学习

掌握了基础语法和编程思想后，继续深入学习：

- [[01-Vue-Router基础概念详解.md|核心概念详解]]
- [[02-导入语句逐行详解.md|模块系统]]
- [[03-createRouter函数深度解析.md|路由创建]]

---

**记住：理解路由的设计思想和编程模式，比记忆语法更重要！** 🎉

---

*这个章节帮助你建立路由系统的理论基础，为后续的实践学习做好准备。*