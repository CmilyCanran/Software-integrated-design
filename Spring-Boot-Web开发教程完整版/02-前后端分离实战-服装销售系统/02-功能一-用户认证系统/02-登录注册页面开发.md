# ç™»å½•æ³¨å†Œé¡µé¢å¼€å‘

## ğŸ¯ æœ¬èŠ‚ç›®æ ‡

ä¸ºæœè£…é”€å”®ç³»ç»Ÿåˆ›å»ºå®Œæ•´çš„ç”¨æˆ·è®¤è¯åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç™»å½•é¡µé¢ã€æ³¨å†Œé¡µé¢ã€ç”¨æˆ·çŠ¶æ€ç®¡ç†å’Œè·¯ç”±æƒé™æ§åˆ¶ã€‚

## ğŸ“‹ åŠŸèƒ½éœ€æ±‚åˆ†æ

### ç”¨æˆ·è®¤è¯ç³»ç»Ÿéœ€è¦å®ç°ï¼š
- âœ… **ç”¨æˆ·ç™»å½•** - ç”¨æˆ·å/å¯†ç ç™»å½•
- âœ… **ç”¨æˆ·æ³¨å†Œ** - æ–°ç”¨æˆ·æ³¨å†Œ
- âœ… **ç™»å½•çŠ¶æ€ä¿æŒ** - Tokenç®¡ç†
- âœ… **æƒé™æ§åˆ¶** - è·¯ç”±å®ˆå«
- âœ… **é€€å‡ºç™»å½•** - æ¸…é™¤ç™»å½•çŠ¶æ€
- âœ… **è¡¨å•éªŒè¯** - è¾“å…¥éªŒè¯å’Œé”™è¯¯æç¤º

---

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šElement Plus åŸºç¡€é…ç½®

### 1. å®‰è£…å¿…è¦çš„ä¾èµ–

åœ¨ `frontend` ç›®å½•ä¸‹æ‰§è¡Œï¼š

```bash
# å®‰è£…Element Plus UIç»„ä»¶åº“
npm install element-plus

# å®‰è£…å›¾æ ‡åº“
npm install @element-plus/icons-vue

# å®‰è£…HTTPè¯·æ±‚åº“
npm install axios

# å®‰è£…æ—¥æœŸå¤„ç†åº“
npm install dayjs
```

### 2. é…ç½®Element Plus

ä¿®æ”¹ `frontend/src/main.js`ï¼š

```javascript
import { createApp } from 'vue'
import { createPinia } from 'pinia'
import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'
import * as ElementPlusIconsVue from '@element-plus/icons-vue'

import App from './App.vue'
import router from './router'

const app = createApp(App)

// æ³¨å†ŒElement Pluså›¾æ ‡
for (const [key, component] of Object.entries(ElementPlusIconsVue)) {
  app.component(key, component)
}

app.use(createPinia())
app.use(router)
app.use(ElementPlus)

app.mount('#app')
```

### 3. é…ç½®å…¨å±€æ ·å¼

ä¿®æ”¹ `frontend/src/App.vue`ï¼š

```vue
<template>
  <router-view />
</template>

<script setup>
// è¿™é‡Œä¸éœ€è¦é¢å¤–é€»è¾‘
</script>

<style>
/* å…¨å±€æ ·å¼é‡ç½® */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  background-color: #f5f7fa;
  line-height: 1.6;
  color: #333;
}

#app {
  min-height: 100vh;
}

/* é“¾æ¥æ ·å¼ */
a {
  text-decoration: none;
  color: inherit;
}

/* å¡ç‰‡é€šç”¨æ ·å¼ */
.el-card {
  border-radius: 8px;
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
  border: none;
}

/* é¡µé¢å®¹å™¨ */
.page-container {
  padding: 20px;
  max-width: 1200px;
  margin: 0 auto;
}

/* é¡µé¢æ ‡é¢˜ */
.page-title {
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 20px;
  color: #303133;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .page-container {
    padding: 10px;
  }
}
</style>
```

---

## ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ç”¨æˆ·çŠ¶æ€ç®¡ç†ï¼Ÿ

åœ¨å¼€å‘æœè£…é”€å”®ç³»ç»Ÿä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç†è§£ä¸€ä¸ªé‡è¦é—®é¢˜ï¼š**ä¸ºä»€ä¹ˆéœ€è¦PiniaçŠ¶æ€ç®¡ç†ï¼Ÿ**

### âŒ **æ²¡æœ‰çŠ¶æ€ç®¡ç†çš„é—®é¢˜**

æƒ³è±¡ä¸€ä¸‹è¿™äº›åœºæ™¯ï¼š

1. **ç”¨æˆ·åœ¨ç™»å½•é¡µé¢ç™»å½•æˆåŠŸ** â†’ è·³è½¬åˆ°å•†å“é¡µé¢ â†’ å•†å“é¡µé¢ä¸çŸ¥é“ç”¨æˆ·å·²ç™»å½•
2. **ç”¨æˆ·æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦** â†’ è·³è½¬åˆ°è´­ç‰©è½¦é¡µé¢ â†’ è´­ç‰©è½¦æ˜¯ç©ºçš„
3. **ç”¨æˆ·åˆ·æ–°é¡µé¢** â†’ ç™»å½•çŠ¶æ€ä¸¢å¤±ï¼Œéœ€è¦é‡æ–°ç™»å½•

### âœ… **PiniaçŠ¶æ€ç®¡ç†çš„è§£å†³æ–¹æ¡ˆ**

Piniaæä¾›äº†ä¸€ä¸ª**å…¨å±€æ•°æ®ä»“åº“**ï¼Œè®©ç”¨æˆ·ä¿¡æ¯ã€è´­ç‰©è½¦ç­‰æ•°æ®åœ¨æ‰€æœ‰é¡µé¢é—´å…±äº«ã€‚

**è¯¦ç»†è§£é‡Šè¯·å‚è€ƒï¼š** [PiniaçŠ¶æ€ç®¡ç†è¯¦è§£](PiniaçŠ¶æ€ç®¡ç†è¯¦è§£.md)

---

## ğŸ”§ ç¬¬äºŒæ­¥ï¼šç”¨æˆ·çŠ¶æ€ç®¡ç†ï¼ˆPinia Storeï¼‰

### 1. åˆ›å»ºç”¨æˆ·Store

åˆ›å»º `frontend/src/stores/auth.js`ï¼š

```javascript
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'

export const useAuthStore = defineStore('auth', () => {
  // çŠ¶æ€
  const token = ref(localStorage.getItem('token') || '')
  const userInfo = ref(JSON.parse(localStorage.getItem('userInfo') || '{}'))
  const loading = ref(false)

  // è®¡ç®—å±æ€§
  const isLoggedIn = computed(() => !!token.value)
  const isAdmin = computed(() => userInfo.value.role === 'admin')
  const username = computed(() => userInfo.value.username || '')
  const userId = computed(() => userInfo.value.id || null)

  // æ–¹æ³•
  const login = (loginData) => {
    token.value = loginData.token
    userInfo.value = loginData.user

    // ä¿å­˜åˆ°localStorage
    localStorage.setItem('token', loginData.token)
    localStorage.setItem('userInfo', JSON.stringify(loginData.user))
  }

  const logout = () => {
    token.value = ''
    userInfo.value = {}

    // æ¸…é™¤localStorage
    localStorage.removeItem('token')
    localStorage.removeItem('userInfo')
  }

  const updateUserInfo = (newUserInfo) => {
    userInfo.value = { ...userInfo.value, ...newUserInfo }
    localStorage.setItem('userInfo', JSON.stringify(userInfo.value))
  }

  const setLoading = (status) => {
    loading.value = status
  }

  return {
    // çŠ¶æ€
    token,
    userInfo,
    loading,

    // è®¡ç®—å±æ€§
    isLoggedIn,
    isAdmin,
    username,
    userId,

    // æ–¹æ³•
    login,
    logout,
    updateUserInfo,
    setLoading
  }
})
```

---

## ğŸ›£ï¸ ç¬¬ä¸‰æ­¥ï¼šè·¯ç”±é…ç½®ä¸å¯¼èˆªå®ˆå«

### 1. é…ç½®è·¯ç”±

ä¿®æ”¹ `frontend/src/router/index.js`ï¼š

```javascript
import { createRouter, createWebHistory } from 'vue-router'
import { useAuthStore } from '@/stores/auth'

const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: [
    {
      path: '/',
      redirect: '/dashboard'
    },
    {
      path: '/dashboard',
      name: 'dashboard',
      component: () => import('../views/Dashboard.vue'),
      meta: { requiresAuth: true }
    },
    {
      path: '/login',
      name: 'login',
      component: () => import('../views/Login.vue'),
      meta: { guest: true }
    },
    {
      path: '/register',
      name: 'register',
      component: () => import('../views/Register.vue'),
      meta: { guest: true }
    }
  ]
})

// è·¯ç”±å®ˆå«
router.beforeEach((to, from, next) => {
  const authStore = useAuthStore()

  // éœ€è¦ç™»å½•çš„é¡µé¢
  if (to.meta.requiresAuth && !authStore.isLoggedIn) {
    next('/login')
    return
  }

  // å·²ç™»å½•ç”¨æˆ·è®¿é—®ç™»å½•/æ³¨å†Œé¡µé¢ï¼Œé‡å®šå‘åˆ°é¦–é¡µ
  if (to.meta.guest && authStore.isLoggedIn) {
    next('/dashboard')
    return
  }

  next()
})

export default router
```

---

## ğŸ“ ç¬¬å››æ­¥ï¼šåˆ›å»ºAPIæœåŠ¡

### 1. é…ç½®APIåŸºç¡€æœåŠ¡

åˆ›å»º `frontend/src/api/auth.js`ï¼š

```javascript
import axios from 'axios'
import { ElMessage } from 'element-plus'

// åˆ›å»ºaxioså®ä¾‹
const api = axios.create({
  baseURL: 'http://localhost:8080/api', // åç«¯APIåœ°å€
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json'
  }
})

// è¯·æ±‚æ‹¦æˆªå™¨
api.interceptors.request.use(
  config => {
    // æ·»åŠ tokenåˆ°è¯·æ±‚å¤´
    const token = localStorage.getItem('token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  error => {
    return Promise.reject(error)
  }
)

// å“åº”æ‹¦æˆªå™¨
api.interceptors.response.use(
  response => {
    return response
  },
  error => {
    console.error('APIè¯·æ±‚é”™è¯¯:', error)

    // å¤„ç†401æœªæˆæƒé”™è¯¯
    if (error.response?.status === 401) {
      localStorage.removeItem('token')
      localStorage.removeItem('userInfo')
      window.location.href = '/login'
      ElMessage.error('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•')
    } else if (error.response?.status >= 500) {
      ElMessage.error('æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•')
    } else if (error.response?.status === 400) {
      ElMessage.error(error.response.data.message || 'è¯·æ±‚å‚æ•°é”™è¯¯')
    } else {
      ElMessage.error('ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥')
    }

    return Promise.reject(error)
  }
)

// è®¤è¯ç›¸å…³API
export const authAPI = {
  // ç”¨æˆ·ç™»å½•
  login(credentials) {
    // æš‚æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œç­‰åç«¯å¼€å‘å®Œæˆåæ›¿æ¢
    return new Promise((resolve) => {
      setTimeout(() => {
        if (credentials.username === 'admin' && credentials.password === '123456') {
          resolve({
            data: {
              token: 'mock-admin-token-' + Date.now(),
              user: {
                id: 1,
                username: 'admin',
                email: 'admin@example.com',
                role: 'admin',
                avatar: 'https://via.placeholder.com/100x100?text=Admin'
              }
            }
          })
        } else if (credentials.username === 'user' && credentials.password === '123456') {
          resolve({
            data: {
              token: 'mock-user-token-' + Date.now(),
              user: {
                id: 2,
                username: 'user',
                email: 'user@example.com',
                role: 'user',
                avatar: 'https://via.placeholder.com/100x100?text=User'
              }
            }
          })
        } else {
          // æ¨¡æ‹Ÿç™»å½•å¤±è´¥
          const error = new Error('ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯')
          error.response = { status: 400, data: { message: 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯' } }
          throw error
        }
      }, 1000)
    })
  },

  // ç”¨æˆ·æ³¨å†Œ
  register(userData) {
    // æš‚æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve({
          data: {
            message: 'æ³¨å†ŒæˆåŠŸ',
            user: {
              id: Date.now(),
              username: userData.username,
              email: userData.email,
              role: 'user'
            }
          }
        })
      }, 1000)
    })
  },

  // è·å–ç”¨æˆ·ä¿¡æ¯
  getUserInfo() {
    return api.get('/auth/user')
  },

  // é€€å‡ºç™»å½•
  logout() {
    return api.post('/auth/logout')
  }
}

export default api
```

---

## ğŸ” ç¬¬äº”æ­¥ï¼šç™»å½•é¡µé¢å®ç°

### 1. åˆ›å»ºç™»å½•é¡µé¢

åˆ›å»º `frontend/src/views/Login.vue`ï¼š

```vue
<template>
  <div class="login-container">
    <div class="login-form">
      <div class="login-header">
        <h2>æœè£…é”€å”®ç³»ç»Ÿ</h2>
        <p>æ¬¢è¿ç™»å½•</p>
      </div>

      <el-form
        ref="loginFormRef"
        :model="loginForm"
        :rules="loginRules"
        size="large"
        @submit.prevent="handleLogin"
      >
        <el-form-item prop="username">
          <el-input
            v-model="loginForm.username"
            placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
            prefix-icon="User"
            clearable
            @keyup.enter="handleLogin"
          />
        </el-form-item>

        <el-form-item prop="password">
          <el-input
            v-model="loginForm.password"
            type="password"
            placeholder="è¯·è¾“å…¥å¯†ç "
            prefix-icon="Lock"
            show-password
            clearable
            @keyup.enter="handleLogin"
          />
        </el-form-item>

        <el-form-item>
          <div class="login-options">
            <el-checkbox v-model="loginForm.rememberMe">è®°ä½æˆ‘</el-checkbox>
            <el-link type="primary">å¿˜è®°å¯†ç ï¼Ÿ</el-link>
          </div>
        </el-form-item>

        <el-form-item>
          <el-button
            type="primary"
            size="large"
            style="width: 100%"
            :loading="authStore.loading"
            @click="handleLogin"
          >
            ç™»å½•
          </el-button>
        </el-form-item>

        <el-form-item>
          <div class="register-link">
            è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ
            <el-link type="primary" @click="goToRegister">ç«‹å³æ³¨å†Œ</el-link>
          </div>
        </el-form-item>
      </el-form>

      <!-- æµ‹è¯•è´¦å·æç¤º -->
      <el-divider>æµ‹è¯•è´¦å·</el-divider>
      <div class="test-accounts">
        <el-tag type="info">ç®¡ç†å‘˜: admin / 123456</el-tag>
        <el-tag type="success">æ™®é€šç”¨æˆ·: user / 123456</el-tag>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive } from 'vue'
import { useRouter } from 'vue-router'
import { useAuthStore } from '@/stores/auth'
import { authAPI } from '@/api/auth'
import { ElMessage } from 'element-plus'

const router = useRouter()
const authStore = useAuthStore()
const loginFormRef = ref()

// è¡¨å•æ•°æ®
const loginForm = reactive({
  username: '',
  password: '',
  rememberMe: false
})

// è¡¨å•éªŒè¯è§„åˆ™
const loginRules = {
  username: [
    { required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å', trigger: 'blur' },
    { min: 3, max: 20, message: 'ç”¨æˆ·åé•¿åº¦åœ¨ 3 åˆ° 20 ä¸ªå­—ç¬¦', trigger: 'blur' }
  ],
  password: [
    { required: true, message: 'è¯·è¾“å…¥å¯†ç ', trigger: 'blur' },
    { min: 6, max: 20, message: 'å¯†ç é•¿åº¦åœ¨ 6 åˆ° 20 ä¸ªå­—ç¬¦', trigger: 'blur' }
  ]
}

// ç™»å½•å¤„ç†
const handleLogin = async () => {
  if (!loginFormRef.value) return

  try {
    // è¡¨å•éªŒè¯
    await loginFormRef.value.validate()

    // è®¾ç½®åŠ è½½çŠ¶æ€
    authStore.setLoading(true)

    // è°ƒç”¨ç™»å½•API
    const response = await authAPI.login({
      username: loginForm.username,
      password: loginForm.password
    })

    // ä¿å­˜ç™»å½•ä¿¡æ¯
    authStore.login(response.data)

    // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
    ElMessage.success('ç™»å½•æˆåŠŸ')

    // è·³è½¬åˆ°é¦–é¡µ
    router.push('/dashboard')

  } catch (error) {
    console.error('ç™»å½•å¤±è´¥:', error)

    // å¦‚æœæ˜¯è¡¨å•éªŒè¯é”™è¯¯ï¼Œä¸æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
    if (error.message !== 'è¡¨å•éªŒè¯å¤±è´¥') {
      ElMessage.error(error.response?.data?.message || 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•')
    }
  } finally {
    authStore.setLoading(false)
  }
}

// è·³è½¬åˆ°æ³¨å†Œé¡µé¢
const goToRegister = () => {
  router.push('/register')
}
</script>

<style scoped>
.login-container {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 20px;
}

.login-form {
  background: white;
  padding: 40px;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  width: 100%;
  max-width: 400px;
}

.login-header {
  text-align: center;
  margin-bottom: 30px;
}

.login-header h2 {
  color: #303133;
  margin-bottom: 8px;
  font-size: 24px;
  font-weight: 600;
}

.login-header p {
  color: #909399;
  font-size: 14px;
}

.login-options {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
}

.register-link {
  text-align: center;
  width: 100%;
  color: #909399;
  font-size: 14px;
}

.test-accounts {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.test-accounts .el-tag {
  justify-content: center;
}

@media (max-width: 480px) {
  .login-form {
    padding: 30px 20px;
  }
}
</style>
```

---

## ğŸ“ ç¬¬å…­æ­¥ï¼šæ³¨å†Œé¡µé¢å®ç°

### 1. åˆ›å»ºæ³¨å†Œé¡µé¢

åˆ›å»º `frontend/src/views/Register.vue`ï¼š

```vue
<template>
  <div class="register-container">
    <div class="register-form">
      <div class="register-header">
        <h2>æœè£…é”€å”®ç³»ç»Ÿ</h2>
        <p>åˆ›å»ºæ–°è´¦å·</p>
      </div>

      <el-form
        ref="registerFormRef"
        :model="registerForm"
        :rules="registerRules"
        size="large"
        @submit.prevent="handleRegister"
      >
        <el-form-item prop="username">
          <el-input
            v-model="registerForm.username"
            placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
            prefix-icon="User"
            clearable
          />
        </el-form-item>

        <el-form-item prop="email">
          <el-input
            v-model="registerForm.email"
            type="email"
            placeholder="è¯·è¾“å…¥é‚®ç®±"
            prefix-icon="Message"
            clearable
          />
        </el-form-item>

        <el-form-item prop="phone">
          <el-input
            v-model="registerForm.phone"
            placeholder="è¯·è¾“å…¥æ‰‹æœºå·"
            prefix-icon="Phone"
            clearable
          />
        </el-form-item>

        <el-form-item prop="password">
          <el-input
            v-model="registerForm.password"
            type="password"
            placeholder="è¯·è¾“å…¥å¯†ç "
            prefix-icon="Lock"
            show-password
            clearable
          />
        </el-form-item>

        <el-form-item prop="confirmPassword">
          <el-input
            v-model="registerForm.confirmPassword"
            type="password"
            placeholder="è¯·ç¡®è®¤å¯†ç "
            prefix-icon="Lock"
            show-password
            clearable
          />
        </el-form-item>

        <el-form-item prop="agreement">
          <el-checkbox v-model="registerForm.agreement">
            æˆ‘å·²é˜…è¯»å¹¶åŒæ„
            <el-link type="primary">ç”¨æˆ·åè®®</el-link>
            å’Œ
            <el-link type="primary">éšç§æ”¿ç­–</el-link>
          </el-checkbox>
        </el-form-item>

        <el-form-item>
          <el-button
            type="primary"
            size="large"
            style="width: 100%"
            :loading="authStore.loading"
            @click="handleRegister"
          >
            æ³¨å†Œ
          </el-button>
        </el-form-item>

        <el-form-item>
          <div class="login-link">
            å·²æœ‰è´¦å·ï¼Ÿ
            <el-link type="primary" @click="goToLogin">ç«‹å³ç™»å½•</el-link>
          </div>
        </el-form-item>
      </el-form>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive } from 'vue'
import { useRouter } from 'vue-router'
import { useAuthStore } from '@/stores/auth'
import { authAPI } from '@/api/auth'
import { ElMessage } from 'element-plus'

const router = useRouter()
const authStore = useAuthStore()
const registerFormRef = ref()

// è¡¨å•æ•°æ®
const registerForm = reactive({
  username: '',
  email: '',
  phone: '',
  password: '',
  confirmPassword: '',
  agreement: false
})

// å¯†ç ç¡®è®¤éªŒè¯
const validateConfirmPassword = (rule, value, callback) => {
  if (value !== registerForm.password) {
    callback(new Error('ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸ä¸€è‡´'))
  } else {
    callback()
  }
}

// æ‰‹æœºå·éªŒè¯
const validatePhone = (rule, value, callback) => {
  const phoneRegex = /^1[3-9]\d{9}$/
  if (value && !phoneRegex.test(value)) {
    callback(new Error('è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·'))
  } else {
    callback()
  }
}

// è¡¨å•éªŒè¯è§„åˆ™
const registerRules = {
  username: [
    { required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å', trigger: 'blur' },
    { min: 3, max: 20, message: 'ç”¨æˆ·åé•¿åº¦åœ¨ 3 åˆ° 20 ä¸ªå­—ç¬¦', trigger: 'blur' },
    { pattern: /^[a-zA-Z0-9_]+$/, message: 'ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿', trigger: 'blur' }
  ],
  email: [
    { required: true, message: 'è¯·è¾“å…¥é‚®ç®±', trigger: 'blur' },
    { type: 'email', message: 'è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±æ ¼å¼', trigger: 'blur' }
  ],
  phone: [
    { required: true, message: 'è¯·è¾“å…¥æ‰‹æœºå·', trigger: 'blur' },
    { validator: validatePhone, trigger: 'blur' }
  ],
  password: [
    { required: true, message: 'è¯·è¾“å…¥å¯†ç ', trigger: 'blur' },
    { min: 6, max: 20, message: 'å¯†ç é•¿åº¦åœ¨ 6 åˆ° 20 ä¸ªå­—ç¬¦', trigger: 'blur' },
    { pattern: /^(?=.*[a-zA-Z])(?=.*\d)/, message: 'å¯†ç å¿…é¡»åŒ…å«å­—æ¯å’Œæ•°å­—', trigger: 'blur' }
  ],
  confirmPassword: [
    { required: true, message: 'è¯·ç¡®è®¤å¯†ç ', trigger: 'blur' },
    { validator: validateConfirmPassword, trigger: 'blur' }
  ],
  agreement: [
    { required: true, message: 'è¯·åŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–', trigger: 'change' }
  ]
}

// æ³¨å†Œå¤„ç†
const handleRegister = async () => {
  if (!registerFormRef.value) return

  try {
    // è¡¨å•éªŒè¯
    await registerFormRef.value.validate()

    // æ£€æŸ¥åè®®
    if (!registerForm.agreement) {
      ElMessage.warning('è¯·å…ˆåŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–')
      return
    }

    // è®¾ç½®åŠ è½½çŠ¶æ€
    authStore.setLoading(true)

    // è°ƒç”¨æ³¨å†ŒAPI
    const response = await authAPI.register({
      username: registerForm.username,
      email: registerForm.email,
      phone: registerForm.phone,
      password: registerForm.password
    })

    // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
    ElMessage.success('æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•')

    // è·³è½¬åˆ°ç™»å½•é¡µé¢
    router.push('/login')

  } catch (error) {
    console.error('æ³¨å†Œå¤±è´¥:', error)

    if (error.message !== 'è¡¨å•éªŒè¯å¤±è´¥') {
      ElMessage.error(error.response?.data?.message || 'æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•')
    }
  } finally {
    authStore.setLoading(false)
  }
}

// è·³è½¬åˆ°ç™»å½•é¡µé¢
const goToLogin = () => {
  router.push('/login')
}
</script>

<style scoped>
.register-container {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 20px;
}

.register-form {
  background: white;
  padding: 40px;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  width: 100%;
  max-width: 450px;
}

.register-header {
  text-align: center;
  margin-bottom: 30px;
}

.register-header h2 {
  color: #303133;
  margin-bottom: 8px;
  font-size: 24px;
  font-weight: 600;
}

.register-header p {
  color: #909399;
  font-size: 14px;
}

.login-link {
  text-align: center;
  width: 100%;
  color: #909399;
  font-size: 14px;
}

@media (max-width: 480px) {
  .register-form {
    padding: 30px 20px;
  }
}
</style>
```

---

## ğŸ  ç¬¬ä¸ƒæ­¥ï¼šåˆ›å»ºä»ªè¡¨æ¿é¡µé¢

### 1. åˆ›å»ºç®€å•çš„ä»ªè¡¨æ¿é¡µé¢

åˆ›å»º `frontend/src/views/Dashboard.vue`ï¼š

```vue
<template>
  <div class="dashboard-container">
    <div class="dashboard-header">
      <h1>æ¬¢è¿æ¥åˆ°æœè£…é”€å”®ç³»ç»Ÿ</h1>
      <p>å½“å‰ç”¨æˆ·ï¼š{{ authStore.username }}</p>
    </div>

    <el-row :gutter="20">
      <el-col :span="8">
        <el-card class="feature-card">
          <el-icon size="48" color="#409EFF"><Shop /></el-icon>
          <h3>å•†å“ç®¡ç†</h3>
          <p>æµè§ˆå’Œç®¡ç†æœè£…å•†å“</p>
          <el-button type="primary">å¼€å§‹ä½¿ç”¨</el-button>
        </el-card>
      </el-col>

      <el-col :span="8">
        <el-card class="feature-card">
          <el-icon size="48" color="#67C23A"><ShoppingCart /></el-icon>
          <h3>è´­ç‰©è½¦</h3>
          <p>ç®¡ç†æ‚¨çš„è´­ç‰©è½¦</p>
          <el-button type="success">æŸ¥çœ‹è´­ç‰©è½¦</el-button>
        </el-card>
      </el-col>

      <el-col :span="8">
        <el-card class="feature-card">
          <el-icon size="48" color="#E6A23C"><Document /></el-icon>
          <h3>è®¢å•ç®¡ç†</h3>
          <p>æŸ¥çœ‹å’Œç®¡ç†è®¢å•</p>
          <el-button type="warning">æˆ‘çš„è®¢å•</el-button>
        </el-card>
      </el-col>
    </el-row>

    <div class="user-actions">
      <el-button @click="handleLogout" type="danger">é€€å‡ºç™»å½•</el-button>
    </div>
  </div>
</template>

<script setup>
import { useRouter } from 'vue-router'
import { useAuthStore } from '@/stores/auth'
import { ElMessage } from 'element-plus'
import { Shop, ShoppingCart, Document } from '@element-plus/icons-vue'

const router = useRouter()
const authStore = useAuthStore()

const handleLogout = () => {
  authStore.logout()
  ElMessage.success('é€€å‡ºç™»å½•æˆåŠŸ')
  router.push('/login')
}
</script>

<style scoped>
.dashboard-container {
  padding: 40px 20px;
  max-width: 1200px;
  margin: 0 auto;
}

.dashboard-header {
  text-align: center;
  margin-bottom: 40px;
}

.dashboard-header h1 {
  color: #303133;
  margin-bottom: 10px;
  font-size: 32px;
}

.dashboard-header p {
  color: #909399;
  font-size: 16px;
}

.feature-card {
  text-align: center;
  padding: 30px 20px;
  margin-bottom: 20px;
  transition: transform 0.3s ease;
}

.feature-card:hover {
  transform: translateY(-5px);
}

.feature-card h3 {
  margin: 20px 0 10px;
  color: #303133;
  font-size: 18px;
}

.feature-card p {
  color: #909399;
  margin-bottom: 20px;
}

.user-actions {
  text-align: center;
  margin-top: 40px;
}

@media (max-width: 768px) {
  .dashboard-container {
    padding: 20px 10px;
  }

  .dashboard-header h1 {
    font-size: 24px;
  }
}
</style>
```

---

## âœ… ç¬¬å…«æ­¥ï¼šæµ‹è¯•åŠŸèƒ½

### 1. å¯åŠ¨é¡¹ç›®æµ‹è¯•

```bash
# åœ¨ frontend ç›®å½•ä¸‹
npm run dev
```

### 2. åŠŸèƒ½æµ‹è¯•æ¸…å•

è®¿é—® http://localhost:5173 æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š

#### âœ… **ç™»å½•åŠŸèƒ½æµ‹è¯•**
1. **é¡µé¢è®¿é—®** - è®¿é—®æ ¹è·¯å¾„è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
2. **è¡¨å•éªŒè¯**ï¼š
   - ç©ºç”¨æˆ·å/å¯†ç éªŒè¯
   - ç”¨æˆ·åé•¿åº¦éªŒè¯
   - å¯†ç é•¿åº¦éªŒè¯
3. **ç™»å½•æˆåŠŸ**ï¼š
   - ä½¿ç”¨ `admin/123456` ç™»å½•ï¼ˆç®¡ç†å‘˜ï¼‰
   - ä½¿ç”¨ `user/123456` ç™»å½•ï¼ˆæ™®é€šç”¨æˆ·ï¼‰
4. **ç™»å½•å¤±è´¥**ï¼š
   - é”™è¯¯çš„ç”¨æˆ·å/å¯†ç 
   - ç½‘ç»œé”™è¯¯å¤„ç†

#### âœ… **æ³¨å†ŒåŠŸèƒ½æµ‹è¯•**
1. **é¡µé¢è·³è½¬** - ä»ç™»å½•é¡µè·³è½¬åˆ°æ³¨å†Œé¡µ
2. **è¡¨å•éªŒè¯**ï¼š
   - ç”¨æˆ·åæ ¼å¼éªŒè¯
   - é‚®ç®±æ ¼å¼éªŒè¯
   - æ‰‹æœºå·æ ¼å¼éªŒè¯
   - å¯†ç å¤æ‚åº¦éªŒè¯
   - å¯†ç ç¡®è®¤éªŒè¯
3. **æ³¨å†ŒæˆåŠŸ** - å¡«å†™å®Œæ•´ä¿¡æ¯æ³¨å†ŒæˆåŠŸ

#### âœ… **è·¯ç”±å®ˆå«æµ‹è¯•**
1. **æœªç™»å½•è®¿é—®** - ç›´æ¥è®¿é—® `/dashboard` è·³è½¬åˆ°ç™»å½•é¡µ
2. **å·²ç™»å½•è®¿é—®** - ç™»å½•åè®¿é—® `/login` è·³è½¬åˆ°é¦–é¡µ
3. **é€€å‡ºç™»å½•** - é€€å‡ºåæ¸…é™¤çŠ¶æ€ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ

#### âœ… **çŠ¶æ€ç®¡ç†æµ‹è¯•**
1. **ç™»å½•çŠ¶æ€ä¿æŒ** - åˆ·æ–°é¡µé¢åä¿æŒç™»å½•çŠ¶æ€
2. **ç”¨æˆ·ä¿¡æ¯è·å–** - æ­£ç¡®æ˜¾ç¤ºç”¨æˆ·åå’Œè§’è‰²
3. **Tokenç®¡ç†** - localStorageä¸­æ­£ç¡®ä¿å­˜token

---

## ğŸ“ å°ç»“

æœ¬èŠ‚æˆ‘ä»¬å®Œæˆäº†ï¼š

âœ… **Element Plus é…ç½®** - UIç»„ä»¶åº“é›†æˆå’Œæ ·å¼é…ç½®
âœ… **ç”¨æˆ·çŠ¶æ€ç®¡ç†** - Pinia store å®ç°ç”¨æˆ·è®¤è¯çŠ¶æ€
âœ… **è·¯ç”±æƒé™æ§åˆ¶** - è·¯ç”±å®ˆå«å’Œæƒé™éªŒè¯
âœ… **API æœåŠ¡å°è£…** - HTTP è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨
âœ… **ç™»å½•é¡µé¢** - å®Œæ•´çš„ç™»å½•åŠŸèƒ½å’Œè¡¨å•éªŒè¯
âœ… **æ³¨å†Œé¡µé¢** - ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½å’Œå¤æ‚è¡¨å•éªŒè¯
âœ… **ä»ªè¡¨æ¿é¡µé¢** - ç”¨æˆ·ç™»å½•åçš„ä¸»é¡µé¢
âœ… **æ¨¡æ‹ŸAPI** - ä¸ºåç»­åç«¯å¼€å‘åšå¥½å‡†å¤‡

## ğŸš€ ä¸‹ä¸€æ­¥

ç°åœ¨ç”¨æˆ·è®¤è¯ç³»ç»Ÿçš„å‰ç«¯éƒ¨åˆ†å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å¼€å‘å¯¹åº”çš„åç«¯APIã€‚

**ä¸‹ä¸€èŠ‚å†…å®¹ï¼š** [ç”¨æˆ·è®¤è¯åç«¯APIå®ç°](03-ç”¨æˆ·è®¤è¯åç«¯APIå®ç°.md) - æˆ‘ä»¬å°†åˆ›å»ºSpring Bootåç«¯æ¥æ”¯æŒè¿™äº›å‰ç«¯åŠŸèƒ½ï¼